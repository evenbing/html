!function(t,e){var i=/\S/,n=/^\s+/,s=/\s+$/,r=/\d/,a=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,c=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,u=/(?:^|:|,)(?:\s*\[)+/g,l=/%20/g,h=/\[\]$/;var f={};var p=Object.prototype.toString;if(i.test("\xa0")){n=/^[\s\xA0]+/;s=/[\s\xA0]+$/}var d=function(t){return m(t)==="function"},v=Array.isArray||function(t){return m(t)==="array"},g=function(t){return t==null||!r.test(t)||g(t)},m=function(t){return t==null?String(t):f[p.call(t)]||"object"},y=function(t,i,n){var s,r=0,a=t.length,o=a===e||d(t);if(n){if(o){for(s in t){if(i.apply(t[s],n)===false){break}}}else{for(;r<a;){if(i.apply(t[r++],n)===false){break}}}}else{if(o){for(s in t){if(i.call(t[s],s,t[s])===false){break}}}else{for(;r<a;){if(i.call(t[r],r,t[r++])===false){break}}}}return t},x=String.prototype.trim?function(t){return t==null?"":String.prototype.trim.call(t)}:function(t){return t==null?"":t.toString().replace(n,"").replace(s,"")},b=function(t,e){return t==null?e:t},w=function(){};y("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,e){f["[object "+e+"]"]=e.toLowerCase()});var j={request:function(t){return t.crossDomain?new S(t).send():new I(t).send()}};var _=function(t){this.settings=t;this.listeners={};this.listen=function(t){for(var e in t){this.listeners[e]=t[e]}};this.notify=function(t,e){var i=this.listeners[t];return i?i.apply(this,e):null};this.listen({beforeSend:t.beforeSend,success:t.success,error:t.error,complete:t.complete})};var I=function(t){_.call(this,t)};I.prototype={send:function(){this.xhr=E();this.notify("beforeSend",[this.xhr,this.settings]);var t=this,i=this.settings.url,n=this.settings.type?this.settings.type.toLowerCase():"get",s=this.settings.async?this.settings.async:true,r=this.settings.headers?this.settings.headers:{},a;if(this.settings.data){a=L(this.settings.data)}if(n=="get"&&a){i+=(i.indexOf("?")>0?"&":"?")+a;a=null}if(this.settings.username){this.xhr.open(n,i,s,this.settings.username,this.settings.password)}else{this.xhr.open(n,i,s)}if(this.settings.mimeType&&this.xhr.overrideMimeType){this.xhr.overrideMimeType(this.settings.mimeType)}if(!this.settings.crossDomain&&!r["X-Requested-With"]){r["X-Requested-With"]="XMLHttpRequest"}try{for(var o in r){this.xhr.setRequestHeader(o,r[o])}}catch(c){}var u=function(i,n){var s,r,a;try{if(u&&(n||t.xhr.readyState===4)){u=e;if(n){if(t.xhr.readyState!==4){t.xhr.abort()}}else{s=t.xhr.status;try{r=t.xhr.statusText}catch(o){r=""}if(!s&&!t.settings.crossDomain){s=a?200:404}else{if(s===1223){s=204}}}if(s>=200&&s<500){t.notify("success",[P(t.xhr,t.settings.dataType),"success",t.xhr])}}}catch(o){t.notify("error",[xhr,xhr.statusText,o.message])}finally{if(t.xhr.readyState===4){t.notify("complete",[t.xhr,r])}}};this.xhr.send(a);if(!this.settings.async||this.xhr.readyState===4){u()}else{this.xhr.onreadystatechange=u}}};var S=function(t){_.call(this,t);this.script=null};S.prototype={send:function(){var i={responseText:null};this.notify("beforeSend",[i,this.settings]);var n=this,s=this.settings,r=s.url,a=b(s.data,{}),o=s.jsonp?s.jsonp:"callback",c=s.jsonpCallback,u=t[c],l=null,h=null,f=null;if(c==null){f=N.register("_callback_");c=f.name}a[o]=f?f.name:"callback";if(a){r+=(r.indexOf("?")>0?"&":"?")+L(a)}t[c]=function(t){h=[t]};var p=document.head||document.getElementsByTagName("head")[0]||document.documentElement;var d=this.script=document.createElement("script");d.async="async";if(s.scriptCharset){d.charset=s.scriptCharset}d.src=r;d.onload=d.onreadystatechange=function(s,r){if(r||!d.readyState||/loaded|complete/.test(d.readyState)){try{d.onload=d.onreadystatechange=null;if(p&&d.parentNode){p.removeChild(d)}d=e;if(!r){t[c]=u;if(h){i.responseText=h[0];l=P(i,"jsonp")}i.statusText="success";if(f){f.unregister();f=null}n.notify("success",[l,i.statusText,i])}}catch(a){n.notify("error",[i,i.statusText,a.message])}finally{n.notify("complete",[i,i.statusText])}}};p.insertBefore(d,p.firstChild)},abort:function(){if(this.script){this.script.onload(0,1)}}};var T=function(){try{return new t.XMLHttpRequest}catch(e){}};var k=function(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}};var E=t.ActiveXObject?function(){return T()||k()}:T;var L=function(t){var e=[],i=function(t,i){i=d(i)?i():i;if(i!=null){e[e.length]=encodeURIComponent(t)+"="+encodeURIComponent(i)}};if(v(t)){y(t,function(){i(this.name,this.value)})}else{for(var n in t){z(n,t[n],i)}}return e.join("&").replace(l,"+")},z=function(t,e,i){if(v(e)){y(e,function(e,n){if(h.test(t)){i(t,n)}else{z(t+"["+(typeof n==="object"||v(n)?e:"")+"]",n,i)}})}else{i(t,e)}},C=function(e){if(typeof e!=="string"||!e){return null}e=x(e);if(t.JSON&&t.JSON.parse){return t.JSON.parse(e)}if(a.test(e.replace(o,"@").replace(c,"]").replace(u,""))){return new Function("return "+e)()}throw"Invalid JSON: "+e};var P=function(t,e){switch(e?e:"text"){case"json":return C(t.responseText);default:return t.responseText}};var N={entries:[],prefix:"_active_",register:function(t){var e,i=this;for(var n=0;n<=this.entries.length;n++){if(this.entries[n]==null){e=n;break}}var s={id:e,name:(t?t:i.prefix)+e,unregister:function(){i.unregister(this.id)}};this.entries[e]=s;return s},unregister:function(i){var n=this.entries[i];if(this.entries.length==i){this.entries.length--}else{delete this.entries[i]}t[n.name]=e}};var M="http://active.163.com/service";var O=function(t){this.options=b(t,{});this.option=function(t,e){if(e==null){return this.options[t]}else{return this.options[t]=e}}};var q=function(){this.paging={page:this.options.page,pageSize:this.options.pageSize};this.gotoPage=function(t,e){this.paging.page=b(t,this.paging.page);this.paging.pageSize=b(e,this.paging.pageSize);return this.load()}};var B=function(t){var e=this;this.options=t.options;this.charset=t.options.charset;this.crossDomain=b(t.options.crossDomain,true);this.dataType=this.crossDomain?"jsonp":"json";this.success=b(t.options.success,w);this.error=b(t.options.error,w);this.complete=b(t.options.complete,w);this.ajax={crossDomain:e.crossDomain,dataType:e.dataType,success:function(t){e.success(t)},error:function(){e.error()},complete:function(){e.complete()}}};var D=function(t,e){if(t){return(e?e:"")+"_charset="+t}else{return""}};var R={};R.form={};R.form.Get=function(t){O.call(this,t);this.load=function(){var t=this,e=new B(this),i=this.options.formId,n=this.options.id;e.ajax.url=M+"/form/v1/"+i+"/"+n+"."+e.dataType+D(e.charset,"?");e.ajax.data={fresh:t.options.fresh};j.request(e.ajax);return this}};R.form.List=function(t){O.call(this,t);q.call(this);this.load=function(){var e=this,i=new B(this),n=this.options.formId;i.ajax.url=M+"/form/v1/"+n+"/list."+i.dataType+D(i.charset,"?");i.ajax.data={prop:t.prop,fresh:t.fresh,compact:t.compact,page:e.paging.page,pageSize:e.paging.pageSize};j.request(i.ajax);return this}};R.form.Count=function(t){O.call(this,t);this.load=function(){var t=new B(this),e=this.options.formId;t.ajax.url=M+"/form/v1/"+e+"/count."+t.dataType+D(t.charset,"?");j.request(t.ajax);return this}};R.form.View=function(t){O.call(this,t);q.call(this);this.load=function(){var t=this,e=new B(this),i=this.options.formId,n=this.options.viewId,s=this.options.params;e.ajax.url=M+"/form/v1/"+i+"/view/"+n+"."+e.dataType+D(e.charset,"?");e.ajax.data={prop:t.options.prop,fresh:t.options.fresh,compact:t.options.compact,page:t.paging.page,pageSize:t.paging.pageSize};if(s){for(var r in s){e.ajax.data["param_"+r]=s[r]}e.ajax.data._decode="UTF-8"}j.request(e.ajax);return this}};R.vote={};R.vote.Vote=function(t){O.call(this,t);this.id=t.id;this.get=function(t){var e=new B(this);e.ajax.url=M+"/vote/v1/"+this.id+"."+e.dataType+"?id="+(v(t)?t.join(","):t)+D(e.charset,"&");j.request(e.ajax);return this}};R.vote.Digg=function(t){R.vote.Vote.call(this,t);this.submit=function(t){var e=new B(this);e.ajax.url=M+"/vote/v1/"+this.id+"/digg."+e.dataType+D(e.charset,"?");e.ajax.data={id:t};j.request(e.ajax);return this}};R.vote.Rating=function(t){R.vote.Vote.call(this,t);this.submit=function(t,e){var i=new B(this);i.ajax.url=M+"/vote/v1/"+this.id+"/rating."+i.dataType+D(i.charset,"?");i.ajax.data={id:t,point:e};j.request(i.ajax);return this}};var A={};A.service=R;A.form={get:function(t){return new R.form.Get(t).load()},list:function(t){return new R.form.List(t).load()},count:function(t){return new R.form.Count(t).load()},search:function(t){return new R.form.View(t).load()}};A.vote={digg:function(t,e){return new R.vote.Digg(t).submit(e)},rating:function(t,e,i){return new R.vote.Rating(t).submit(e,i)},get:function(t,e){return new R.vote.Vote(t).get(e)}};t.active=A}(window);!function(t,e){var i=t.active?t.active:{};i.sample={one:function(t){return new s(t).load()},list:function(t){return new a(t).load()},search:function(t){return new o(t).load()}};var n=0;var s=function(t){var e=this;this.formId=t.formId;this.voteId=t.voteId;this.uid=n++;this.idParam=t.idParam?t.idParam:"id";this.id=t.id?t.id:I(this.idParam);this.charset=t.charset;this.callback=t.callback;this.content=new p(t.content);this.voter=this.voteId?new u(e.uid,this.voteId):null;this.service=new i.service.form.Get({formId:e.formId,id:e.id,charset:e.charset,success:function(t){t.value.uid=e.uid;if(e.callback){e.callback(t)}e.content.render(t.value);if(e.voter){e.voter.render(t.value)}}});this.load=function(){this.service.load();return this}};var r=function(){this.load=function(){this.service.load();return this};this.gotoPage=function(t,e){this.service.gotoPage(t,e);return this}};var a=function(t){var e=this;r.call(this);this.uid=n++;this.formId=t.formId;this.voteId=t.voteId;this.pageSize=t.pageSize;this.charset=t.charset;this.callback=t.callback;this.content=new p(t.content);this.voter=this.voteId?new u(e.uid,this.voteId):null;this.pagebar=t.pagebar?new c(t.pagebar,t.displayPages):null;this.service=new i.service.form.List({formId:e.formId,pageSize:e.pageSize,charset:e.charset,success:function(t){t.uid=e.uid;if(e.callback){e.callback(t)}e.content.render(t);if(e.voter){e.voter.renders(t.list)}if(e.pagebar){e.pagebar.render(t.paging,function(t){e.gotoPage(t)})}}})};var o=function(t){var e=this;r.call(this);this.uid=n++;this.formId=t.formId;this.viewId=t.viewId;this.voteId=t.voteId;this.pageSize=t.pageSize;this.charset=t.charset;this.params=t.params;this.callback=t.callback;this.content=new p(t.content);this.voter=this.voteId?new u(e.uid,this.voteId):null;this.pagebar=t.pagebar?new c(t.pagebar,t.displayPages):null;this.service=new i.service.form.View({formId:e.formId,viewId:e.viewId,pageSize:e.pageSize,charset:e.charset,params:e.params,success:function(t){t.uid=e.uid;if(e.callback){e.callback(t)}e.content.render(t);if(e.voter){e.voter.renders(t.list)}if(e.pagebar){e.pagebar.render(t.paging,function(t){e.gotoPage(t)})}}})};var c=function(t,e){this.tmpls=new p(t);this.displayPages=e>0?e:10;this.render=function(t,e){if(!this.tmpls)return;var i=[];for(var n=t.page-Math.floor(this.displayPages/2);i.length<this.displayPages;n++){if(n>0){i.push(n)}if(n>=t.totalPage){break}}t.pages=i;this.tmpls.render(t,null,function(i,n){var s=_(i.target,"page");for(var r=0;r<s.length;r++){var a=s[r];var o=parseInt(a.getAttribute("page"));b(a,"click",function(t,i){e(i.page,i.pageSize)},{page:o,pageSize:t.pageSize})}})}};var u=function(t,e){var n=this;this.uid=t;this.id=e;this.render=function(t){s([t.id])};this.renders=function(t){var e=[];for(var i=0;i<t.length;i++){e.push(t[i].id)}s(e)};var s=function(t){var e=new i.service.vote.Vote({id:n.id,success:function(e){r[e.type](t,e)}});e.get(t)};var r={0:function(t,e){for(var s=0;s<t.length;s++){var r=t[s];var a=document.getElementById(n.uid+"_vote_value_"+n.id+"_"+r);var o=document.getElementById(n.uid+"_vote_"+n.id+"_"+r);if(a){x(a,e.value[r])}if(o){b(o,"click",function(t,e){var s=new i.service.vote.Digg({id:n.id,success:function(t){if(t.status=="success"){if(e.values!=null){x(e.values,t.value)}}else if(t.status=="closed"){}else if(t.status=="premature"){}else if(t.status=="expired"){}else if(t.status=="duplicate"){}else if(t.status=="not_logged"){}}});s.submit(e.id)},{id:r,values:a})}}},1:function(t,e){for(var s=0;s<t.length;s++){!function(){var r=t[s];var a=document.getElementById(n.uid+"_vote_"+n.id+"_"+r);if(a){var o=new l(a,e.range,e.value[r]);o.bind(function(t){var e=new i.service.vote.Rating({id:n.id,success:function(t){switch(t.status){case"success":o.update(t.value);break;case"duplicate":break;case"closed":break;case"premature":break;case"expired":break;case"not_logged":break}}});e.submit(r,t)})}}()}}}};var l=function(t,e,i){this.container=t;this.range=e;this.value=i;this.point=0;this.handle=v;this.wrapper=document.createElement("div");this.text=document.createElement("div");this.stars=document.createElement("div");this.outer=document.createElement("div");this.inner=document.createElement("div");this.inner.innerHTML="&nbsp;";this.wrapper.className="active-ratingbox";this.text.className="active-ratingbox-text";this.stars.className="active-ratingbox-stars";this.outer.className="active-ratingbox-outer";this.inner.className="active-ratingbox-inner";this.outer.appendChild(this.inner);this.stars.appendChild(this.outer);this.wrapper.appendChild(this.stars);this.wrapper.appendChild(this.text);var n=this;b(this.stars,"mousemove",function(t){var e=f(t).x-h(n.outer).x;var i=n.outer.clientWidth;if(e<0){e=0}if(e>i){e=i}var s=e/i;if(s<0){s=0}if(s>1){s=1}n.point=((n.range[1]-n.range[0])*s).toFixed(1);n.text.innerHTML=n.point;n.inner.style.width=e+"px"});b(this.stars,"mouseleave",function(t){n.update()});b(this.stars,"click",function(t){if(n.handle){n.handle.call(this,n.point)}});this.update();this.container.appendChild(this.wrapper)};l.prototype={bind:function(t){this.handle=t},update:function(t){this.value=t?t:this.value;var e=((this.value.a-this.range[0])/(this.range[1]-this.range[0])).toFixed(2);if(e<0){e=0}if(e>1){e=1}this.point=((this.range[1]-this.range[0])*e).toFixed(1);this.inner.style.width=e*100+"%";this.text.innerHTML=this.point}};var h=function(t){var e=t;var i={x:t.offsetLeft,y:t.offsetTop};while(e=e.offsetParent){i.x+=e.offsetLeft;i.y+=e.offsetTop}return i};var f=function(e){var i={x:0,y:0};if(typeof t.pageYOffset!="undefined"){i.x=t.pageXOffset;i.y=t.pageYOffset}else if(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat"){i.x=document.documentElement.scrollLeft;i.y=document.documentElement.scrollTop}else if(typeof document.body!="undefined"){i.x=document.body.scrollLeft;i.y=document.body.scrollTop}i.x+=e.clientX;i.y+=e.clientY;return i};var p=function(t){this.templates=[];this.render=function(t,e,i){for(var n=0;n<this.templates.length;n++){var s=this.templates[n];if(e){e(s,t)}s.tmpl.update(s.target,t);if(i){i(s,t)}}};if(t){for(var e=0;e<t.length;e++){var i=t[e];var n={};if(g(i)){n.source=y(i[0]);n.target=y(i[1])}else{n.source=y(i)}n.tmpl=new d({element:n.source});if(n.target==null){n.target=document.createElement("div");n.source.parentNode.insertBefore(n.target,n.source);n.source.parentNode.removeChild(n.source)}this.templates.push(n)}}};var d=function(t){if(typeof t.text=="string"){this.source=t.text}else{if(typeof t.element=="string"){t.element=document.getElementById(t.element)}if(t.element.value){this.source=t.element.value}else{this.source=t.element.innerHTML}}if(t.cache==false){this.compile()}else{if((this._compiled=d.cache[this.source])==null){this.compile();d.cache[this.source]=this._compiled}}};d.prototype={compile:function(){this._compiled=new Function("__d","__h","var __b=[],__print=function(){__b.push.apply(__b,arguments);};with(__d){__b.push('"+this.source.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t==(.*?)%>/g,"',$1,'").replace(/\t=(.*?)%>/g,"',__h.encode($1),'").split("	").join("');").split("%>").join("__b.push('").split("\r").join("\\'")+"');}return __b.join('');")},process:function(t){return this._compiled(t,d.helper)},update:function(t,e){if(typeof t=="string"){t=document.getElementById(t)}t.innerHTML=this.process(e)}};d.cache={};d.helper={encode:function(t){t=String(t===null?"":t);return t.replace(/&(?!\w+;)|["'<>\\]/g,function(t){switch(t){case"&":return"&amp;";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return t}})}};var v=function(){};var g=function(t){return Object.prototype.toString.apply(t)==="[object Array]"};var m=function(t){return typeof t=="object"&&!(t instanceof Object)&&t.nodeType==1};var y=function(t){if(typeof t=="string"){return document.getElementById(t)}else if(m(t)){return t}return null};var x=function(t,e){t[t.value?"value":"innerHTML"]=e};var b=function(e,i,n,s){var r=w[i];if(r==null){var a=function(i){i=i||function(){var e=t.event;e.preventDefault=function(){e.returnValue=false};e.stopPropagation=function(){e.cancelBubble=true};return e}();n.call(e,i,s)};if(e.addEventListener){e.addEventListener(i,a,false)}else if(e.attachEvent){e.attachEvent("on"+i,a)}}else{r(e,i,n,s)}};var w={mouseenter:function(t,e,i,n){b(t,"mouseover",j(i),n)},mouseleave:function(t,e,i,n){b(t,"mouseout",j(i),n)}};var j=function(t){return function(e){var i=e.relatedTarget;while(i!=this&&i){try{i=i.parentNode}catch(n){break}}if(i!=this){t(e)}}};var _=function(t,e){var i=[];var n=t.getElementsByTagName("*");for(var s=0;s<n.length;s++){if(n[s].getAttribute(e)!=null){i.push(n[s])}}n=null;return i};var I=function(e){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");var n=t.location.search.substr(1).match(i);return n==null?null:unescape(n[2])}}(window);