(function(e,t,n){var a={};var r=(new Date).valueOf();var i=function(){var e=t.getElementsByTagName("script");var n=e[e.length-1];return n.src.replace(/(\.min|)\.js.*/,".css")}();var s={format:function(e){var t=e;for(var n=1;n<arguments.length;n+=1){var a=new RegExp("\\{"+(n-1)+"\\}","gi");t=t.replace(a,arguments[n])}return t},loadJs:function(e,n,a){var r=t.createElement("script");r.type="text/javascript";r.charset=a||"utf-8";r.onload=function(){n&&n();try{t.body.removeChild(r)}catch(e){}};r.src=e;t.body.appendChild(r)},loadCss:function(e,n){var a=t.createElement("link");a.type="text/css";a.rel="stylesheet";a.href=e;a.charset=n||"utf-8";t.getElementsByTagName("head")[0].appendChild(a)},addEvent:function(e,a,r){var i=function(e,t){try{var n=e.contains?e!=t&&e.contains(t):!!(e.compareDocumentPosition(t)&16)}catch(a){}return n?n:false};var s=function(e){if(!e.preventDefault){e.preventDefault=function(){e.returnValue=false}}if(!e.stopPropagation){e.stopPropagation=function(){e.cancelBubble=true}}if(!e.target){e.target=e.srcElement||t}if(e.target.nodeType===3){e.target=e.target.parentNode}if(!e.relatedTarget&&e.fromElement){e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement}if(e.pageX==null&&e.clientX!=null){var n=e.target.ownerDocument||t;var a=n.documentElement;var r=n.body;e.pageX=e.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0);e.pageY=e.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)}if(e.type=="DOMMouseScroll"||e.type=="mousewheel"){e.delta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}return e};var l=function(e){var t=e.currentTarget,n=e.relatedTarget;if(!i(t,n)&&t!=n){r.call(t,s(e))}};if(e.addEventListener){if(a=="mouseenter"){e.addEventListener("mouseover",l,false)}else if(a=="mouseleave"){e.addEventListener("mouseout",l,false)}else if(a==="mousewheel"&&t["mozHidden"]!==n){e.addEventListener("DOMMouseScroll",l,false)}else{e.addEventListener(a,r,false)}}else{e.attachEvent("on"+a,function(t){r.call(e,s(t))})}},isArray:function(e){return Object.prototype.toString.call(e)=="[object Array]"},isNodeList:function(e){return Object.prototype.toString.call(e)=="[object NodeList]"},toArray:function(e){return Array.prototype.slice.call(e)},each:function(e,t,n){if(e==null)return;if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach){e.forEach(t,n)}else if(e.length===+e.length){for(var a=0,r=e.length;a<r;a++){if(t.call(n,e[a],a,e)==={})return}}else{for(var i in e){if(e.hasOwnProperty(i)){if(t.call(n,e[i],i,e)==={})return}}}},getElementsByClassName:function(e,n,a){var r,i=[];if(t.getElementsByClassName){var s=(n||t).getElementsByClassName(e);for(r=0;n=s[r++];){if(a!=="*"&&n.tagName===a.toUpperCase()){i.push(n)}}return i}else{n=n||t;a=a||"*";var l=e.split(" "),o=a==="*"&&n.all?n.all:n.getElementsByTagName(a),c=[],f,u;r=l.length;while(--r>=0){c.push(new RegExp("(^|\\s)"+l[r]+"(\\s|$)"))}var d=o.length;while(--d>=0){f=o[d];u=false;for(var m=0,h=c.length;m<h;m++){u=c[m].test(f.className);if(!u)break}if(u)i.push(f)}return i}},getScrollOffset:function(){var n=t.documentElement,a=t.body;return e.pageYOffset?[e.pageXOffset,e.pageYOffset]:n&&n.scrollTop?[n.scrollLeft,n.scrollTop]:[a.scrollLeft,a.scrollTop]},getUUID:function(){return++r}};var l={};l.intro='<div class="yx-intro">'+'    <div class="yx-intro-inner">'+'        <div class="yx-intro-text">'+"            <h3>\u5b8c\u6210\u4ee5\u4e0b\u4efb\u52a1\uff0c\u5c31\u53ef\u4ee5\u8f6c\u53d1\u6613\u4fe1\u5566\uff01</h3>"+"            <ol>"+'                <li class="{0}"><a href="http://e.mail.163.com/mobilemail/home.do?from=yixinshare" target="_blank">\u5f00\u901a\u7f51\u6613\u624b\u673a\u53f7\u7801\u90ae\u7bb1</a></li>'+'                <li class="{1}"><a href="http://yixin.im/#f=www" target="_blank">\u624b\u673a\u53f7\u7801\u5f00\u901a\u6613\u4fe1</a></li>'+"            </ol>"+"        </div>"+'        <div class="yx-intro-qr">'+'            <div class="yx-intro-qr-tip" title="\u4e8c\u7ef4\u7801\u5206\u4eab"></div>'+"            <h3>\u626b\u63cf\u4e8c\u7ef4\u7801\u5206\u4eab</h3>"+'            <div class="yx-intro-qr-img">'+'                <img src="about:blank" data-src="http://yixin.news.163.com/yixin/share/qrcode.b?w=180&h=180&content={2}" width="180" height="180" />'+"            </div>"+"        </div>"+"    </div>"+"</div>";l.share='<div class="yx-share">'+"    <h3>{0}</h3>"+'    <div class="yx-summary">'+'        <div class="yx-pic" style=\'background-image: url("http://timge8.126.net/image?h=90&w=90&fill=0&gif=0&quality=80&url={2}")\'></div>'+"        <p>{1}</p>"+"    </div>"+'    <div class="yx-remark">'+'        <input type="text" class="yx-remark-input" maxlength="300" placeholder="\u8bf4\u70b9\u4ec0\u4e48...">'+"    </div>"+'    <div class="yx-bottom cf">'+'        <div class="yx-mobile">'+"            <span>\u7ed1\u5b9a\u7684\u624b\u673a\u5c3e\u6570\u662f\uff1a<b>{3}</b></span>"+'            <a href="https://reg.163.com/mobilealias/index.do" target="_blank">\u6211\u8981\u4fee\u6539</a>'+"        </div>"+'        <a class="yx-sbtn">\u5206\u4eab\u5230\u6613\u4fe1\u670b\u53cb\u5708</a>'+"    </div>"+"</div>";l.msg='<div class="yx-msg">{0}</div>';l.pub='<a href="javascript:void(0);" class="yx-close" target="_self">\xd7</a>';var o=/P_INFO=([^;=]+);/;var c=function(){return o.test(t["cookie"])};var f=function(){var e=t["cookie"].match(o);return e?e.pop().split("|"):null};var u=function(){var e=f();return e&&!!/^\d{6}&[0|1]$/.test(e[6])?e[6].substr(0,6):null};var d=function(){var e=f();return e?e[0]:null};var m=function(t){var n="http://yixin.news.163.com/yixin/share/sign.b?m={0}&c={1}";var a="yixin_cb_"+s.getUUID();e[a]=function(e){t&&t(e.result)};s.loadJs(s.format(n,d(),a))};var h={};a._node=t.createElement("div");a._node.className="yx-box";var p={};p._opened=false;p._shareOpened=false;p._init=function(){a._node.innerHTML=""};p._show=function(){!this._opened&&t.body.appendChild(a._node);this._opened=true};p._hide=function(){this._opened&&t.body.removeChild(a._node);this._opened=false};p._hideTimer=null;p.hide=function(e){e=e||0;p._hideTimer=setTimeout(function(){p._hide()},e*1e3)};"intro share msg".replace(/[^, ]+/g,function(e){p[e]=function(){this._init();a._node.className="yx-box yx-status-"+e;var t=l[e]+l.pub,n=s.toArray(arguments);n.unshift(t);a._node.innerHTML=s.format.apply(null,n);this._hideTimer&&clearTimeout(this._hideTimer);this._hide();this._show();if(/MSIE 6/gi.test(navigator.userAgent)){a._node.style.top=s.getScrollOffset()[1]+200+"px";a._node.className=a._node.className}if("share"===e){s.getElementsByClassName("yx-remark-input",a._node,"input")[0].focus();this._shareOpened=true}}});s.addEvent(a._node,"click",function(e){var t=e.target||e.srcElement;if(t.className.indexOf("yx-close")>=0)p._hide();if(t.className.indexOf("yx-sbtn")>=0)v()});s.addEvent(a._node,"mousemove",function(e){var t=e.target||e.srcElement;var n="yx-intro-qr-tip";if(t.className.indexOf(n)>=0){var r=s.getElementsByClassName("yx-intro",a._node,"div")[0];var i=s.getElementsByClassName(n,r,"div")[0];var l=setTimeout(function(){r.className="yx-intro yx-intro-status-qr"},300);var o=function(){l&&clearTimeout(l)};s.addEvent(i,"mouseleave",o);s.addEvent(r,"mouseleave",function(){o();r.className="yx-intro"})}});s.addEvent(t,"keyup",function(e){if(e.keyCode===27&&p._opened)p._hide();if(e.keyCode===13&&p._shareOpened)v()});var v=function(){var t={};s.each(h,function(e,n){t[n]="function"===typeof e?e():e});var n={title:t.title||"",desc:t.desc,image:"http://timge8.126.net/image?h=500&w=500&fill=0&gif=0&quality=80&url="+t.image,url:t.url,source:t.source,ps:s.getElementsByClassName("yx-remark-input",a._node,"input")[0].value,m:d(),c:"yixin_cb_"+s.getUUID()};var r=[];s.each(n,function(e,t){r.push(t+"="+encodeURIComponent(e))});e[n.c]=function(e){if(e.result==true){p.msg("\u5206\u4eab\u6210\u529f!")}else{p.msg("\u5206\u4eab\u5931\u8d25, \u8bf7\u7a0d\u5019\u91cd\u8bd5.")}if("number"===typeof t.closeAfterShare&&t.closeAfterShare>=0){p.hide(t.closeAfterShare)}else if("undefined"===typeof t.closeAfterShare){p.hide(2)}};s.loadJs("http://yixin.news.163.com/yixin/share/addfdfeed.b?"+r.join("&"))};var y=function(e){var t={title:"",desc:"",image:"http://img1.cache.netease.com/cnews/css13/img/yixin_holder.jpg",url:"http://www.163.com?f=YixinShare",source:"\u7f51\u6613"};s.each(t,function(n,a){if(!e[a]){e[a]=t[a]}});return e};var g=function(t){t=y(t);var n=null;if(!c()||!u()){p.intro("","",t.url)}else{n=setTimeout(function(){p.msg("\u52a0\u8f7d\u4e2d...")},500);m(function(e){n&&clearTimeout(n);if(!e){p.intro("checked","",t.url)}else{p.share(t.title,t.desc,t.image,u().substr(3,3));h=t}})}var a=t.url.replace("http://","http//snstj.")+"?snstj_yixin";e["neteaseTracker"]&&e["neteaseTracker"](true,a)};a.bind=function(e,n){if(!e)return;n=n||{};var a=[];if(e.nodeType&&1===e.nodeType){a.push(e)}else if(s.isArray(e)&&e.length>0){a=e}else if(s.isNodeList(e)&&e.length>0){a=s.toArray(e)}else if("string"===typeof e){a.push(t.getElementById(e))}else{return}s.each(a,function(e){s.addEvent(e,"click",function(e){g(n);e.preventDefault()})})};a.open=g;s.loadCss(i);e.YixinShare=a})(window,document);