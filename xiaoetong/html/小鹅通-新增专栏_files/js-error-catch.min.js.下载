var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol==="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};var BJ_REPORT=function(r){if(r.BJ_REPORT)return r.BJ_REPORT;var n=[],e={},t={id:0,uin:0,url:"",combo:1,ext:null,level:4,ignore:[],random:1,delay:1e3,submit:null,repeat:1},o=function r(n,e){return Object.prototype.toString.call(n)==="[object "+(e||"Object")+"]"},u=function r(n){var e=typeof n==="undefined"?"undefined":_typeof(n);return"object"===e&&!!n},i=function r(n){return null===n?!0:o(n,"Number")?!1:!n},a=r.onerror;r.onerror=function(n,e,t,u,i){var f=n;i&&i.stack&&(f=c(i)),o(f,"Event")&&(f+=f.type?"--"+f.type+"--"+(f.target?f.target.tagName+"::"+f.target.src:""):""),h.push({msg:f,target:e,rowNum:t,colNum:u}),d(),a&&a.apply(r,arguments)};var f=function r(n){try{if(n.stack){var e=n.stack.match("https?://[^\n]+");e=e?e[0]:"";var t=e.match(":(\\d+):(\\d+)");t||(t=[0,0,0]);var o=c(n);return{msg:o,rowNum:t[1],colNum:t[2],target:e.replace(t[0],"")}}return n.name&&n.message&&n.description?{msg:JSON.stringify(n)}:n}catch(r){return n}},c=function r(n){var e=n.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),t=n.toString();return e.indexOf(t)<0&&(e=t+"@"+e),e},s=function r(n,e){var o=[],a=[],f=[];if(u(n)){n.level=n.level||t.level;for(var c in n){var s=n[c];if(!i(s)){if(u(s))try{s=JSON.stringify(s)}catch(r){s="[BJ_REPORT detect value stringify error] "+r.toString()}f.push(c+":"+s),o.push(c+"="+encodeURIComponent(s)),a.push(c+"["+e+"]="+encodeURIComponent(s))}}}return[a.join("&"),f.join(","),o.join("&")]},l=[],p=function r(n){if(t.submit)t.submit(n);else{var e=new Image;l.push(e),e.src=n}},v=function r(n){if(!u(n))return!0;var o=n.msg,i=e[o]=(parseInt(e[o],10)||0)+1;return i>t.repeat},y=[],m=0,d=function r(e){if(t.report){for(;n.length;){var u=!1,i=n.shift();if(!v(i)){var a=s(i,y.length);if(o(t.ignore,"Array"))for(var f=0,c=t.ignore.length;c>f;f++){var l=t.ignore[f];if(o(l,"RegExp")&&l.test(a[1])||o(l,"Function")&&l(i,a[1])){u=!0;break}}u||(t.combo?y.push(a[0]):p(t.report+a[2]+"&_t="+ +new Date),t.onReport&&t.onReport(t.id,i))}}var d=y.length;if(d){var r=function r(){clearTimeout(m),p(t.report+y.join("&")+"&count="+y.length+"&_t="+ +new Date),m=0,y=[]};e?r():m||(m=setTimeout(r,t.delay))}}},h=r.BJ_REPORT={push:function r(e){if(Math.random()>=t.random)return h;var o=u(e)?f(e):{msg:e};return t.ext&&!o.ext&&(o.ext=t.ext),n.push(o),d(),h},report:function r(n){return n&&h.push(n),d(!0),h},info:function r(n){return n?(u(n)?n.level=2:n={msg:n,level:2},h.push(n),h):h},debug:function r(n){return n?(u(n)?n.level=1:n={msg:n,level:1},h.push(n),h):h},init:function r(e){if(u(e))for(var o in e){t[o]=e[o]}var i=parseInt(t.id,10);return i&&(/qq\.com$/gi.test(location.hostname)&&(t.url||(t.url="//badjs2.qq.com/badjs"),t.uin||(t.uin=parseInt((document.cookie.match(/\buin=\D+(\d+)/)||[])[1],10))),t.report=(t.url||"/badjs")+"?id="+i+"&uin="+t.uin+"&from="+encodeURIComponent(location.href)+"&"),n.length&&d(),h},__onerror__:r.onerror};return"undefined"!=typeof console&&console.error&&setTimeout(function(){var r=((location.hash||"").match(/([#&])BJ_ERROR=([^&$]+)/)||[])[2];r&&console.error("BJ_ERROR",decodeURIComponent(r).replace(/(:\d+:\d+)\s*/g,"$1\n"))},0),h}(window);"undefined"!=typeof module&&(module.exports=BJ_REPORT),function(r){if(!r.BJ_REPORT)return void console.error("please load bg-report first");var n=function n(e){r.BJ_REPORT.report(e)},e={};r.BJ_REPORT.tryJs=function(r){return r&&(n=r),e};var t,o=function r(n,e){for(var t in e){n[t]=e[t]}},u=function r(n){return"function"==typeof n},i=function e(o,u){return function(){try{return o.apply(this,u||arguments)}catch(o){if(n(o),o.stack&&console&&console.error&&console.error("[BJ-REPORT]",o.stack),!t){var e=r.onerror;r.onerror=function(){},t=setTimeout(function(){r.onerror=e,t=null},50)}throw o}}},a=function r(n){return function(){for(var r,e=[],t=0,o=arguments.length;o>t;t++){r=arguments[t],u(r)&&(r=i(r)),e.push(r)}return n.apply(this,e)}},f=function r(n){return function(r,e){if("string"==typeof r)try{r=new Function(r)}catch(r){throw r}var t=[].slice.call(arguments,2);return r=i(r,t.length&&t),n(r,e)}},c=function r(n,e){return function(){for(var r,t,o=[],a=0,f=arguments.length;f>a;a++){r=arguments[a],u(r)&&(t=i(r))&&(r.tryWrap=t)&&(r=t),o.push(r)}return n.apply(e||this,o)}},s=function r(n){var e,t;for(e in n){t=n[e],u(t)&&(n[e]=i(t))}return n};e.spyJquery=function(){var n=r.$;if(!n||!n.event)return e;var t,o;n.zepto?(t=n.fn.on,o=n.fn.off,n.fn.on=c(t),n.fn.off=function(){for(var r,n=[],e=0,t=arguments.length;t>e;e++){r=arguments[e],u(r)&&r.tryWrap&&(r=r.tryWrap),n.push(r)}return o.apply(this,n)}):window.jQuery&&(t=n.event.add,o=n.event.remove,n.event.add=c(t),n.event.remove=function(){for(var r,n=[],e=0,t=arguments.length;t>e;e++){r=arguments[e],u(r)&&r.tryWrap&&(r=r.tryWrap),n.push(r)}return o.apply(this,n)});var i=n.ajax;return i&&(n.ajax=function(r,e){return e||(e=r,r=void 0),s(e),r?i.call(n,r,e):i.call(n,e)}),e},e.spyModules=function(){var n=r.require,t=r.define;return t&&t.amd&&n&&(r.require=a(n),o(r.require,n),r.define=a(t),o(r.define,t)),r.seajs&&t&&(r.define=function(){for(var r,n=[],e=0,o=arguments.length;o>e;e++){r=arguments[e],u(r)&&(r=i(r),r.toString=function(r){return function(){return r.toString()}}(arguments[e])),n.push(r)}return t.apply(this,n)},r.seajs.use=a(r.seajs.use),o(r.define,t)),e},e.spySystem=function(){return r.setTimeout=f(r.setTimeout),r.setInterval=f(r.setInterval),e},e.spyCustom=function(r){return u(r)?i(r):s(r)},e.spyAll=function(){return e.spyJquery().spyModules().spySystem(),e}}(window);