(function (window) {
    window.mGG = {
        api: {
            base: 'mtop.cnwireless.',
            //失效查询
            'CPAgingList': 'CNSenderService.obtainCPAgingList',
            //查物流详情
            'queryLogisticPackageByMailNo': 'CNLogisticDetailService.wapqueryLogisticPackageByMailNo',
            //物流信息
            'queryLogisDetailByMailNo': 'CnWirelessLogisticsQueryService.queryLogisDetailByMailNo',
            //物流公司数据
            queryAppLogisticsCompanyConfig: 'CnWirelessLogisticsQueryService.queryAppLogisticsCompanyConfig',
            //查寄件站点
            'queryStationList': 'CNSenderService.queryStationList',
            //站点详情
            'queryStationById': 'CNStationService.queryStationById',
            //快递电话
            'getAppLogisticsCompanyInfo': 'CNCainiaoAppService.getLogisticsCompanyList',
            //附近快递员
            'queryPostManModelList': 'CNNearPostManService.queryPostManModelList'
        },
        load: load,
        fillTpl: fillTpl,
        floatPage: floatPage,
        initGPS: initGPS,
        getCityCode: getCityCode,
        urlParam: urlParam,
        getLogobyCode: getLogobyCode,
        tmp: {
            StationList: tmpStationList
        }
    };

    function tmpStationList(data) {
        if (data.data.data.stationList && data.data.data.stationList.length == 0) {
            var html = '<div style="font-size: 36px; text-align: center;">该地区暂时没有站点</div>';
            $('.address-list').html(html);
            return false;
        }

        var list = data.data.data.stationList;
        for (var i = 0; i < list.length; i++) {
            var distance = list[i].distance * 1;
            if (distance) {
                list[i].distance = (distance / 1000).toFixed(2);
            }
            if (!list[i].picUrl) {
                list[i].picUrl = '//gw.alicdn.com/tps/TB1OKFWIFXXXXXyXpXXXXXXXXXX.png';
            }
            var stationServiceInfos = list[i].stationServiceInfos;
            for (var j = 0; j < stationServiceInfos.length; j++) {
                var code = stationServiceInfos[j].serviceCode;
                if (code == 101 || code == 104) {
                    list[i].PICK_SERVICE = true;
                }

                if (code == 110) {
                    list[i].SENDER = true;
                }
            }
        }
        return list;
    }

    function initGPS(callback_s, callback_f) {
        var me = this;

        //获取本地经纬度
        navigator.geolocation.getCurrentPosition( // 该函数有如下三个参数
            function (pos) {
                me.latitude = pos.coords.latitude;
                me.longitude = pos.coords.longitude;

                var lnglatXY = [me.longitude, me.latitude];//地图上所标点的坐标

                //获取adCode并完成回调
                getCityCode(lnglatXY, function (result) {
                    me.adCode = result.regeocode.addressComponent.adcode;
                    me.address = result.regeocode.formattedAddress;
                    if (callback_s) {
                        callback_s(me);
                    }
                }, callback_f);

            }, function (err) {
                var code = err.code;
                var errorArry = ['定位失败，请稍后尝试', '定位失败，请稍后尝试', '定位失败，请稍后尝试', '定位失败，请稍后尝试'];

                alert(errorArry[code]);


                if (callback_f) {
                    callback_f();
                }
            }, { // 附带参数
                enableHighAccuracy: true, // 提高精度(耗费资源)
                timeout: 3000,
                maximumAge: 10 // 获取到的地理信息的有效期，超过有效期则重新获取一次位置信息
            }
        );
    }


    //根据经纬度获取城市adcode
    function getCityCode(lnglatXY, callback, callback_f) {

        if (!lnglatXY) {
            //debug
            var lnglatXY = [120.018, 30.28];//地图上所标点的坐标
        }

        AMap.service('AMap.Geocoder', function () {//回调函数
            //实例化Geocoder
            geocoder = new AMap.Geocoder();

            geocoder.getAddress(lnglatXY, function (status, result) {
                if (status === 'complete' && result.info === 'OK') {
                    if (callback) {
                        callback(result);
                    }

                } else {
                    callback_f();
                }
            });

        })
    }


    function load(api, params, callback_s, callback_f) {
        var url = mGG.api.base + api;
        var mask = $('<div class="loading"></div>');

        $('body').append(mask);

        lib.mtop.config.subDomain = 'wap';            // mtop的子域 
        lib.mtop.config.mainDomain = 'guoguo-app.com';     // mtop的主域 
        lib.mtop.config.prefix = 'api';

        lib.mtop.config.H5Request = true;
        lib.mtop.config.AntiCreep = true;
        lib.mtop.config.AntiFlood = true;

        lib.mtop.request({
            api: url,
            data: params,
            v: '1.0',
            dataType: 'jsonp',
            timeout: 20000,
            isSec: 0,
            ecode: 0,
            type: 'get'
        }, function (msg) {
            mask.remove();
            showMsg(msg);
            if (typeof callback_s === 'function') {
                callback_s(msg);
            }
        }, function (msg) {
            mask.remove();
            showMsg(msg);
            if (typeof callback_f === 'function') {
                callback_f(msg);
            }
        })
    }

    function showMsg(msg) {
        console.log(msg);
        //alert(JSON.stringify(msg));
    }

    function fillTpl(tplid, data) {
        var tmpl = document.getElementById(tplid).innerHTML;
        var doTtmpl = doT.template(tmpl);
        return doTtmpl(data);
    }

    function floatPage(html) {
        var page = '<div class="floatPage">' + html + '</div>';
        $('body').append(page);
    }

    function urlParam() {
        var name, value;
        var retrunObj = {};
        var str = location.href; //取得整个地址栏
        var num = str.indexOf("?");
        str = str.substr(num + 1); //取得所有参数   stringvar.substr(start [, length ]

        var arr = str.split("&"); //各个参数放到数组里
        for (var i = 0; i < arr.length; i++) {
            num = arr[i].indexOf("=");
            if (num > 0) {
                name = arr[i].substring(0, num);
                value = arr[i].substr(num + 1);
                retrunObj[name] = value;
            }
        }
        return retrunObj;
    }

    function getLogobyCode(code) {
        var info = window.CNCP[code];
        var logo;
        if (info) {
            logo = info.logo;
        } else {
            logo = '//gw.alicdn.com/tps/TB1OKFWIFXXXXXyXpXXXXXXXXXX.png';
        }

        return logo;
    }

})(window);


;
(function (win) {
    // 对cookie操作
    var Cookies = {
        /**
         * 写cookie
         * @param name 名字
         * @param value 值
         * @param expires 过期时间，单位“天”
         * @param path 路径
         */
        setCookie: function (name, value, expires, path) {
            if ((typeof name == 'undefined') || (name == '') || (typeof value == 'undefined') || value == '') {
                return;
            }

            var cookieStr = name + '=' + encodeURIComponent(value) + ';';
            if (typeof expires != 'undefined') {
                var exp = new Date();
                exp.setTime(exp.getTime() + expires * 24 * 60 * 60 * 1000);
                cookieStr += 'expires=' + exp.toGMTString() + ';';
            }
            // JS在存储的时候，可能是存储的路径没有指定，所以存储的时候，在不同的目录存储，导致了不同的结果，最后在存储的时候，指定了下path，问题得意解决
            if (typeof path != 'undefined') {
                cookieStr += 'path=' + path;
            }

            document.cookie = cookieStr;
        },
        getCookie: function (name) {
            var arr, reg = new RegExp('(^| )' + name + '=([^;]*)(;|$)');
            if (arr = document.cookie.match(reg)) {
                return decodeURIComponent(arr[2]);
            } else {
                return null;
            }
        },
        /**
         * 删除cookie
         * @param name 名字
         * @param path 路径
         */
        delCookie: function (name, path) {
            var exp = new Date();
            exp.setTime(exp.getTime() - 1);
            var val = Cookies.getCookie(name);
            if (val != null) document.cookie = name + '=' + val + ';expires=' + exp.toGMTString() + ';path=' + path;
        }
    };

    win.Cookies = Cookies;

})(window);


;
(function (win) {
    var defaultIcon = '//gw.alicdn.com/tps/TB1OKFWIFXXXXXyXpXXXXXXXXXX.png';
    // 菜鸟CP
    win.CNCP = {
        "STO": {
            "serviceTel": "4008895543",
            "pinyin": "STKD",
            "companyId": "100",
            "companyName": "申通快递",
            "companyCode": "STO",
            "logo": "//gw.alicdn.com/tps/TB19.XFIFXXXXaxXVXXXXXXXXXX.png"
        },
        "ZTO": {
            "pinyin": "ZTKD",
            "serviceTel": "4008270270",
            "companyCode": "ZTO",
            "companyId": "500",
            "companyName": "中通快递",
            "logo": "//gw.alicdn.com/tps/TB1f8BIIFXXXXcgXFXXXXXXXXXX.png"
        },
        "YTO": {
            "companyName": "圆通速递",
            "serviceTel": "95554",
            "companyId": "101",
            "companyCode": "YTO",
            "pinyin": "YTSD",
            "logo": "//gw.alicdn.com/tps/TB1hBhNIFXXXXX0XFXXXXXXXXXX.png"
        },
        "SF": {
            "serviceTel": "95338",
            "companyCode": "SF",
            "companyId": "505",
            "pinyin": "SFSY",
            "companyName": "顺丰速运",
            "logo": "//gw.alicdn.com/tps/TB1C.JWIFXXXXcFXXXXXXXXXXXX.png"
        },
        "YUNDA": {
            "pinyin": "YDKD",
            "serviceTel": "4008216789",
            "companyName": "韵达快递",
            "companyCode": "YUNDA",
            "companyId": "102",
            "logo": "//gw.alicdn.com/tps/TB1GJXDIFXXXXaSXVXXXXXXXXXX.png"
        },
        "HTKY": {
            "companyName": "百世汇通",
            "pinyin": "BSHT",
            "serviceTel": "4009565656",
            "companyId": "502",
            "companyCode": "HTKY",
            "logo": "//gw.alicdn.com/tps/TB1kAXEIFXXXXauXVXXXXXXXXXX.png"
        },
        "TTKDEX": {
            "companyName": "天天快递",
            "serviceTel": "4001888888",
            "companyCode": "TTKDEX",
            "pinyin": "TTKD",
            "companyId": "504",
            "logo": "//gw.alicdn.com/tps/TB11eBHIFXXXXXpXVXXXXXXXXXX.png"
        },
        "ZJS": {
            "pinyin": "ZJS",
            "serviceTel": "4006789000",
            "companyCode": "ZJS",
            "companyName": "宅急送",
            "companyId": "103",
            "logo": "//gw.alicdn.com/tps/TB1034LIFXXXXbjXFXXXXXXXXXX.png"
        },
        "EMS": {
            "serviceTel": "11183",
            "companyCode": "EMS",
            "companyName": "EMS",
            "companyId": "2",
            "pinyin": "EMS",
            "logo": "//gw.alicdn.com/tps/TB1NttNIFXXXXarXFXXXXXXXXXX.png"
        },
        "EYB": {
            "serviceTel": "11183",
            "companyName": "EMS经济快递",
            "pinyin": "EMSJJKD",
            "companyId": "3",
            "companyCode": "EYB",
            "logo": "//gw.alicdn.com/tps/TB1jdVEIFXXXXbzXVXXXXXXXXXX.png"
        },
        "QFKD": {
            "companyId": "1216",
            "companyName": "全峰快递",
            "serviceTel": "4001000001",
            "pinyin": "QFKD",
            "companyCode": "QFKD",
            "logo": "//gw.alicdn.com/tps/TB1v4xGIFXXXXXxXVXXXXXXXXXX.png"
        },
        "UC": {
            "serviceTel": "4001111119",
            "companyCode": "UC",
            "pinyin": "YSKD",
            "companyName": "优速快递",
            "companyId": "1207",
            "logo": "//gw.alicdn.com/tps/TB1coXZIFXXXXb_XXXXXXXXXXXX.png"
        },
        "DBL": {
            "pinyin": "DBKD",
            "companyId": "107",
            "companyName": "德邦快递",
            "companyCode": "DBL",
            "serviceTel": "95353",
            "logo": "//gw.alicdn.com/tps/TB134JDIFXXXXawXVXXXXXXXXXX.png"
        },
        "DBKD": {
            "pinyin": "DBKD",
            "companyId": "107",
            "companyName": "德邦快递",
            "companyCode": "DBKD",
            "serviceTel": "95353",
            "logo": "//gw.alicdn.com/tps/TB134JDIFXXXXawXVXXXXXXXXXX.png"
        },

        "BJCS": {
            "pinyin": "CS100",
            "companyName": "城市100",
            "companyCode": "BJCS",
            "serviceTel": "",
            "companyId": "1262",
            "logo": defaultIcon
        },
        "ZTOSH": {
            "pinyin": "ZTOSH",
            "companyName": "ZTOSH",
            "serviceTel": "",
            "companyId": "21000046011",
            "companyCode": "ZTOSH",
            "logo": defaultIcon
        },

        "DTW": {
            "companyId": "512",
            "pinyin": "DT",
            "serviceTel": "",
            "companyName": "大田",
            "companyCode": "DTW",
            "logo": defaultIcon
        },
        "YANWENINTE": {
            "companyName": "燕文国际",
            "companyId": "21000052002",
            "serviceTel": "",
            "companyCode": "YANWENINTE",
            "pinyin": "YWGJ",
            "logo": defaultIcon
        },
        "NEDA": {
            "companyId": "1192",
            "serviceTel": "",
            "pinyin": "NDSD",
            "companyCode": "NEDA",
            "companyName": "能达速递",
            "logo": "//gw.alicdn.com/tps/TB1s080IFXXXXbXXXXXXXXXXXXX.png"
        },
        "PKGJWL": {
            "companyCode": "PKGJWL",
            "pinyin": "PYGJWL77",
            "serviceTel": "",
            "companyId": "21000038002",
            "companyName": "派易国际物流77",
            "logo": defaultIcon
        },
        "ZTOGZ": {
            "companyName": "ZTOGZ",
            "companyId": "21000048014",
            "pinyin": "ZTOGZ",
            "companyCode": "ZTOGZ",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "GTO": {
            "companyName": "国通快递",
            "companyCode": "GTO",
            "serviceTel": "4001111123",
            "companyId": "200143",
            "pinyin": "GTKD",
            "logo": "//gw.alicdn.com/tps/TB1yGlRIFXXXXchXpXXXXXXXXXX.png"
        },
        "UCS": {
            "companyCode": "UCS",
            "companyName": "UCS合众速递",
            "companyId": "204956",
            "pinyin": "UCSHZSD",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "FEDEX": {
            "pinyin": "LBKD",
            "companyCode": "FEDEX",
            "serviceTel": "",
            "companyId": "106",
            "companyName": "联邦快递",
            "logo": "//gw.alicdn.com/tps/TB1S_l0IFXXXXbEXXXXXXXXXXXX.png"
        },
        "CRE": {
            "pinyin": "ZTKY",
            "companyCode": "CRE",
            "serviceTel": "",
            "companyName": "中铁快运",
            "companyId": "1016",
            "logo": "//gw.alicdn.com/tps/TB1DaFJIFXXXXb4XFXXXXXXXXXX.png"
        },

        "BEST": {
            "serviceTel": "",
            "companyId": "105",
            "companyName": "百世物流",
            "companyCode": "BEST",
            "pinyin": "BSWL",
            "logo": defaultIcon
        },

        "LB": {
            "companyName": "龙邦速递",
            "companyId": "1195",
            "companyCode": "LB",
            "serviceTel": "",
            "pinyin": "LBSD",
            "logo": "//gw.alicdn.com/tps/TB1YuVHIFXXXXXqXVXXXXXXXXXX.png"
        },
        "GDEMS": {
            "companyCode": "GDEMS",
            "companyName": "广东EMS",
            "companyId": "1269",
            "pinyin": "GDEMS",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "GZLT": {
            "companyCode": "GZLT",
            "companyId": "200427",
            "pinyin": "FYPS",
            "companyName": "飞远配送 ",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "YANWENGZ": {
            "companyCode": "YANWENGZ",
            "serviceTel": "",
            "companyName": "燕文广州",
            "pinyin": "YWGZ",
            "companyId": "21000051008",
            "logo": defaultIcon
        },
        "YUD": {
            "companyName": "长发",
            "serviceTel": "",
            "companyCode": "YUD",
            "pinyin": "CF",
            "companyId": "513",
            "logo": defaultIcon
        },
        "JWY": {
            "companyId": "204900",
            "companyCode": "JWY",
            "companyName": "居无忧",
            "pinyin": "JWY",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "GZFY": {
            "companyName": "凡宇速递",
            "companyId": "202857",
            "pinyin": "FYSD",
            "serviceTel": "",
            "companyCode": "GZFY",
            "logo": defaultIcon
        },
        "BOYOL": {
            "companyCode": "BOYOL",
            "serviceTel": "",
            "companyId": "204902",
            "pinyin": "BYXXD",
            "companyName": "贝业新兄弟",
            "logo": defaultIcon
        },
        "SF": {
            "serviceTel": "95338",
            "companyCode": "SF",
            "companyId": "505",
            "pinyin": "SFSY",
            "companyName": "顺丰速运",
            "logo": "//gw.alicdn.com/tps/TB1C.JWIFXXXXcFXXXXXXXXXXXX.png"
        },
        "DFH": {
            "serviceTel": "",
            "pinyin": "DFH",
            "companyId": "1137",
            "companyCode": "DFH",
            "companyName": "东方汇",
            "logo": defaultIcon
        },
        "RUSTON": {
            "serviceTel": "",
            "companyId": "21000046009",
            "companyName": "RUSTON",
            "pinyin": "RUSTON",
            "companyCode": "RUSTON",
            "logo": defaultIcon
        },
        "YANWENYW": {
            "pinyin": "YWYW",
            "serviceTel": "",
            "companyId": "21000051006",
            "companyName": "燕文义乌",
            "companyCode": "YANWENYW",
            "logo": defaultIcon
        },
        "LTS": {
            "serviceTel": "",
            "companyCode": "LTS",
            "companyName": "联昊通",
            "companyId": "1214",
            "pinyin": "LHT",
            "logo": "//gw.alicdn.com/tps/TB1qktJIFXXXXbUXpXXXXXXXXXX.png"
        },
        "QRT": {
            "companyCode": "QRT",
            "serviceTel": "",
            "companyName": "增益速递",
            "pinyin": "ZYSD",
            "companyId": "1208",
            "logo": defaultIcon
        },
        "HZABC": {
            "companyId": "1121",
            "serviceTel": "",
            "companyCode": "HZABC",
            "companyName": "飞远(爱彼西)配送",
            "pinyin": "FYABXPS",
            "logo": defaultIcon
        },
        "OTHER": {
            "pinyin": "QT",
            "companyId": "-1",
            "serviceTel": "",
            "companyName": "其他",
            "companyCode": "OTHER",
            "logo": defaultIcon
        },
        "SURE": {
            "serviceTel": "",
            "companyName": "速尔",
            "companyCode": "SURE",
            "pinyin": "SE",
            "companyId": "201174",
            "logo": defaultIcon
        },
        "AIR": {
            "companyName": "亚风",
            "serviceTel": "",
            "companyId": "507",
            "pinyin": "YF",
            "companyCode": "AIR",
            "logo": defaultIcon
        },
        "SHQ": {
            "serviceTel": "",
            "companyId": "108",
            "pinyin": "HQWL",
            "companyCode": "SHQ",
            "companyName": "华强物流",
            "logo": defaultIcon
        },
        "POST": {
            "pinyin": "ZGYZ",
            "companyCode": "POST",
            "serviceTel": "11185",
            "companyId": "1",
            "companyName": "中国邮政",
            "logo": "//gw.alicdn.com/tps/TB1BqXMIFXXXXa9XFXXXXXXXXXX.png"
        },
        "CNEX": {
            "pinyin": "JJKD",
            "companyId": "1056",
            "companyCode": "CNEX",
            "companyName": "佳吉快递",
            "serviceTel": "",
            "logo": "//gw.alicdn.com/tps/TB1JfNLIFXXXXaNXFXXXXXXXXXX.png"
        },
        "XB": {
            "companyName": "新邦物流",
            "companyId": "1186",
            "serviceTel": "",
            "pinyin": "XBWL",
            "companyCode": "XB",
            "logo": "//gw.alicdn.com/tps/TB1QEXHIFXXXXcPXFXXXXXXXXXX.png"
        },
        "YANWENBJ": {
            "companyName": "燕文北京",
            "companyCode": "YANWENBJ",
            "companyId": "21000051004",
            "serviceTel": "",
            "pinyin": "YWBJ",
            "logo": defaultIcon
        },
        "YANWENSH": {
            "companyId": "21000052004",
            "companyName": "燕文上海",
            "companyCode": "YANWENSH",
            "serviceTel": "",
            "pinyin": "YWSH",
            "logo": defaultIcon
        },
        "XFWL": {
            "companyName": "信丰物流",
            "companyCode": "XFWL",
            "pinyin": "XFWL",
            "serviceTel": "",
            "companyId": "202855",
            "logo": defaultIcon
        },
        "YS": {
            "serviceTel": "",
            "companyName": "合众阳晟",
            "companyId": "204904",
            "companyCode": "YS",
            "logo": defaultIcon
        },
        "UNIPS": {
            "companyId": "1237",
            "pinyin": "FW",
            "companyName": "发网",
            "serviceTel": "",
            "companyCode": "UNIPS",
            "logo": defaultIcon
        },

        "SY": {
            "serviceTel": "",
            "companyName": "首业",
            "companyCode": "SY",
            "companyId": "1138",
            "pinyin": "SY",
            "logo": defaultIcon
        },
        "YC": {
            "companyName": "远长",
            "serviceTel": "",
            "companyId": "1139",
            "companyCode": "YC",
            "pinyin": "YC",
            "logo": defaultIcon
        },
        "YCT": {
            "pinyin": "HMZJB",
            "serviceTel": "",
            "companyId": "1185",
            "companyCode": "YCT",
            "companyName": "黑猫宅急便",
            "logo": "//gw.alicdn.com/tps/TB1B9pGIFXXXXcNXFXXXXXXXXXX.png"
        },
        "CYEXP": {
            "companyId": "511",
            "pinyin": "CY",
            "companyCode": "CYEXP",
            "companyName": "长宇",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "POSTB": {
            "companyName": "邮政国内小包",
            "serviceTel": "",
            "companyCode": "POSTB",
            "pinyin": "YZGNXB",
            "companyId": "200734",
            "logo": defaultIcon
        },
        "FAST": {
            "pinyin": "KJKD",
            "companyId": "1204",
            "companyName": "快捷快递",
            "companyCode": "FAST",
            "serviceTel": "4008333666",
            "logo": "//gw.alicdn.com/tps/TB1o6BWIFXXXXXbXpXXXXXXXXXX.png"
        },
        "HOAU": {
            "serviceTel": "",
            "companyName": "天地华宇",
            "companyCode": "HOAU",
            "pinyin": "TDHY",
            "companyId": "1191",
            "logo": "//gw.alicdn.com/tps/TB1Cz00IFXXXXbJXXXXXXXXXXXX.png"
        },
        "YANWENSZ": {
            "companyName": "燕文深圳",
            "pinyin": "YWSZ",
            "companyCode": "YANWENSZ",
            "companyId": "21000052006",
            "serviceTel": "",
            "logo": defaultIcon
        },

        "ESB": {
            "companyName": "E速宝",
            "pinyin": "ESB",
            "companyCode": "ESB",
            "serviceTel": "",
            "companyId": "200740",
            "logo": defaultIcon
        },
        "MGSD": {
            "companyName": "美国速递",
            "pinyin": "MGSD",
            "companyId": "21000007003",
            "companyCode": "MGSD",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "UAPEX": {
            "companyId": "1259",
            "companyCode": "UAPEX",
            "pinyin": "QYKD",
            "serviceTel": "",
            "companyName": "全一快递",
            "logo": "//gw.alicdn.com/tps/TB1vqN1IFXXXXbKXXXXXXXXXXXX.png"
        }
    };


    win.OUTCP = {
        "STO": {
            "serviceTel": "4008895543",
            "pinyin": "STKD",
            "companyId": "100",
            "companyName": "申通快递",
            "companyCode": "STO",
            "logo": "//gw.alicdn.com/tps/TB19.XFIFXXXXaxXVXXXXXXXXXX.png"
        },
        "ZTO": {
            "pinyin": "ZTKD",
            "serviceTel": "4008270270",
            "companyCode": "ZTO",
            "companyId": "500",
            "companyName": "中通快递",
            "logo": "//gw.alicdn.com/tps/TB1f8BIIFXXXXcgXFXXXXXXXXXX.png"
        },
        "YTO": {
            "companyName": "圆通速递",
            "serviceTel": "95554",
            "companyId": "101",
            "companyCode": "YTO",
            "pinyin": "YTSD",
            "logo": "//gw.alicdn.com/tps/TB1hBhNIFXXXXX0XFXXXXXXXXXX.png"
        },
        "SF": {
            "serviceTel": "95338",
            "companyCode": "SF",
            "companyId": "505",
            "pinyin": "SFSY",
            "companyName": "顺丰速运",
            "logo": "//gw.alicdn.com/tps/TB1C.JWIFXXXXcFXXXXXXXXXXXX.png"
        },
        "YUNDA": {
            "pinyin": "YDKD",
            "serviceTel": "4008216789",
            "companyName": "韵达快递",
            "companyCode": "YUNDA",
            "companyId": "102",
            "logo": "//gw.alicdn.com/tps/TB1GJXDIFXXXXaSXVXXXXXXXXXX.png"
        },
        "HTKY": {
            "companyName": "百世汇通",
            "pinyin": "BSHT",
            "serviceTel": "4009565656",
            "companyId": "502",
            "companyCode": "HTKY",
            "logo": "//gw.alicdn.com/tps/TB1kAXEIFXXXXauXVXXXXXXXXXX.png"
        },
        "TTKDEX": {
            "companyName": "天天快递",
            "serviceTel": "4001888888",
            "companyCode": "TTKDEX",
            "pinyin": "TTKD",
            "companyId": "504",
            "logo": "//gw.alicdn.com/tps/TB11eBHIFXXXXXpXVXXXXXXXXXX.png"
        },
        "ZJS": {
            "pinyin": "ZJS",
            "serviceTel": "4006789000",
            "companyCode": "ZJS",
            "companyName": "宅急送",
            "companyId": "103",
            "logo": "//gw.alicdn.com/tps/TB1034LIFXXXXbjXFXXXXXXXXXX.png"
        },
        "EMS": {
            "serviceTel": "11183",
            "companyCode": "EMS",
            "companyName": "EMS",
            "companyId": "2",
            "pinyin": "EMS",
            "logo": "//gw.alicdn.com/tps/TB1NttNIFXXXXarXFXXXXXXXXXX.png"
        },
        "EYB": {
            "serviceTel": "11183",
            "companyName": "EMS经济快递",
            "pinyin": "EMSJJKD",
            "companyId": "3",
            "companyCode": "EYB",
            "logo": "//gw.alicdn.com/tps/TB1jdVEIFXXXXbzXVXXXXXXXXXX.png"
        },
        "QFKD": {
            "companyId": "1216",
            "companyName": "全峰快递",
            "serviceTel": "4001000001",
            "pinyin": "QFKD",
            "companyCode": "QFKD",
            "logo": "//gw.alicdn.com/tps/TB1v4xGIFXXXXXxXVXXXXXXXXXX.png"
        },
        "UC": {
            "serviceTel": "4001111119",
            "companyCode": "UC",
            "pinyin": "YSKD",
            "companyName": "优速快递",
            "companyId": "1207",
            "logo": "//gw.alicdn.com/tps/TB1coXZIFXXXXb_XXXXXXXXXXXX.png"
        },
        "DBL": {
            "pinyin": "DBKD",
            "companyId": "107",
            "companyName": "德邦快递",
            "companyCode": "DBL",
            "serviceTel": "95353",
            "logo": "//gw.alicdn.com/tps/TB134JDIFXXXXawXVXXXXXXXXXX.png"
        },
        "DBKD": {
            "pinyin": "DBKD",
            "companyId": "107",
            "companyName": "德邦快递",
            "companyCode": "DBKD",
            "serviceTel": "95353",
            "logo": "//gw.alicdn.com/tps/TB134JDIFXXXXawXVXXXXXXXXXX.png"
        },

        "BJCS": {
            "pinyin": "CS100",
            "companyName": "城市100",
            "companyCode": "BJCS",
            "serviceTel": "",
            "companyId": "1262",
            "logo": defaultIcon
        },
        "ZTOSH": {
            "pinyin": "ZTOSH",
            "companyName": "ZTOSH",
            "serviceTel": "",
            "companyId": "21000046011",
            "companyCode": "ZTOSH",
            "logo": defaultIcon
        },

        "DTW": {
            "companyId": "512",
            "pinyin": "DT",
            "serviceTel": "",
            "companyName": "大田",
            "companyCode": "DTW",
            "logo": defaultIcon
        },
        "YANWENINTE": {
            "companyName": "燕文国际",
            "companyId": "21000052002",
            "serviceTel": "",
            "companyCode": "YANWENINTE",
            "pinyin": "YWGJ",
            "logo": defaultIcon
        },
        "NEDA": {
            "companyId": "1192",
            "serviceTel": "",
            "pinyin": "NDSD",
            "companyCode": "NEDA",
            "companyName": "能达速递",
            "logo": "//gw.alicdn.com/tps/TB1s080IFXXXXbXXXXXXXXXXXXX.png"
        },
        "PKGJWL": {
            "companyCode": "PKGJWL",
            "pinyin": "PYGJWL77",
            "serviceTel": "",
            "companyId": "21000038002",
            "companyName": "派易国际物流77",
            "logo": defaultIcon
        },
        "ZTOGZ": {
            "companyName": "ZTOGZ",
            "companyId": "21000048014",
            "pinyin": "ZTOGZ",
            "companyCode": "ZTOGZ",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "GTO": {
            "companyName": "国通快递",
            "companyCode": "GTO",
            "serviceTel": "4001111123",
            "companyId": "200143",
            "pinyin": "GTKD",
            "logo": "//gw.alicdn.com/tps/TB1yGlRIFXXXXchXpXXXXXXXXXX.png"
        },
        "UCS": {
            "companyCode": "UCS",
            "companyName": "UCS合众速递",
            "companyId": "204956",
            "pinyin": "UCSHZSD",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "FEDEX": {
            "pinyin": "LBKD",
            "companyCode": "FEDEX",
            "serviceTel": "",
            "companyId": "106",
            "companyName": "联邦快递",
            "logo": "//gw.alicdn.com/tps/TB1S_l0IFXXXXbEXXXXXXXXXXXX.png"
        },
        "CRE": {
            "pinyin": "ZTKY",
            "companyCode": "CRE",
            "serviceTel": "",
            "companyName": "中铁快运",
            "companyId": "1016",
            "logo": "//gw.alicdn.com/tps/TB1DaFJIFXXXXb4XFXXXXXXXXXX.png"
        },

        "BEST": {
            "serviceTel": "",
            "companyId": "105",
            "companyName": "百世物流",
            "companyCode": "BEST",
            "pinyin": "BSWL",
            "logo": defaultIcon
        },

        "LB": {
            "companyName": "龙邦速递",
            "companyId": "1195",
            "companyCode": "LB",
            "serviceTel": "",
            "pinyin": "LBSD",
            "logo": "//gw.alicdn.com/tps/TB1YuVHIFXXXXXqXVXXXXXXXXXX.png"
        },
        "GDEMS": {
            "companyCode": "GDEMS",
            "companyName": "广东EMS",
            "companyId": "1269",
            "pinyin": "GDEMS",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "GZLT": {
            "companyCode": "GZLT",
            "companyId": "200427",
            "pinyin": "FYPS",
            "companyName": "飞远配送 ",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "YANWENGZ": {
            "companyCode": "YANWENGZ",
            "serviceTel": "",
            "companyName": "燕文广州",
            "pinyin": "YWGZ",
            "companyId": "21000051008",
            "logo": defaultIcon
        },
        "YUD": {
            "companyName": "长发",
            "serviceTel": "",
            "companyCode": "YUD",
            "pinyin": "CF",
            "companyId": "513",
            "logo": defaultIcon
        },
        "JWY": {
            "companyId": "204900",
            "companyCode": "JWY",
            "companyName": "居无忧",
            "pinyin": "JWY",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "GZFY": {
            "companyName": "凡宇速递",
            "companyId": "202857",
            "pinyin": "FYSD",
            "serviceTel": "",
            "companyCode": "GZFY",
            "logo": defaultIcon
        },
        "BOYOL": {
            "companyCode": "BOYOL",
            "serviceTel": "",
            "companyId": "204902",
            "pinyin": "BYXXD",
            "companyName": "贝业新兄弟",
            "logo": defaultIcon
        },
        "SF": {
            "serviceTel": "95338",
            "companyCode": "SF",
            "companyId": "505",
            "pinyin": "SFSY",
            "companyName": "顺丰速运",
            "logo": "//gw.alicdn.com/tps/TB1C.JWIFXXXXcFXXXXXXXXXXXX.png"
        },
        "DFH": {
            "serviceTel": "",
            "pinyin": "DFH",
            "companyId": "1137",
            "companyCode": "DFH",
            "companyName": "东方汇",
            "logo": defaultIcon
        },
        "RUSTON": {
            "serviceTel": "",
            "companyId": "21000046009",
            "companyName": "RUSTON",
            "pinyin": "RUSTON",
            "companyCode": "RUSTON",
            "logo": defaultIcon
        },
        "YANWENYW": {
            "pinyin": "YWYW",
            "serviceTel": "",
            "companyId": "21000051006",
            "companyName": "燕文义乌",
            "companyCode": "YANWENYW",
            "logo": defaultIcon
        },
        "LTS": {
            "serviceTel": "",
            "companyCode": "LTS",
            "companyName": "联昊通",
            "companyId": "1214",
            "pinyin": "LHT",
            "logo": "//gw.alicdn.com/tps/TB1qktJIFXXXXbUXpXXXXXXXXXX.png"
        },
        "QRT": {
            "companyCode": "QRT",
            "serviceTel": "",
            "companyName": "增益速递",
            "pinyin": "ZYSD",
            "companyId": "1208",
            "logo": defaultIcon
        },
        "HZABC": {
            "companyId": "1121",
            "serviceTel": "",
            "companyCode": "HZABC",
            "companyName": "飞远(爱彼西)配送",
            "pinyin": "FYABXPS",
            "logo": defaultIcon
        },
        "OTHER": {
            "pinyin": "QT",
            "companyId": "-1",
            "serviceTel": "",
            "companyName": "其他",
            "companyCode": "OTHER",
            "logo": defaultIcon
        },
        "SURE": {
            "serviceTel": "",
            "companyName": "速尔",
            "companyCode": "SURE",
            "pinyin": "SE",
            "companyId": "201174",
            "logo": defaultIcon
        },
        "AIR": {
            "companyName": "亚风",
            "serviceTel": "",
            "companyId": "507",
            "pinyin": "YF",
            "companyCode": "AIR",
            "logo": defaultIcon
        },
        "SHQ": {
            "serviceTel": "",
            "companyId": "108",
            "pinyin": "HQWL",
            "companyCode": "SHQ",
            "companyName": "华强物流",
            "logo": defaultIcon
        },
        "POST": {
            "pinyin": "ZGYZ",
            "companyCode": "POST",
            "serviceTel": "11185",
            "companyId": "1",
            "companyName": "中国邮政",
            "logo": "//gw.alicdn.com/tps/TB1BqXMIFXXXXa9XFXXXXXXXXXX.png"
        },
        "CNEX": {
            "pinyin": "JJKD",
            "companyId": "1056",
            "companyCode": "CNEX",
            "companyName": "佳吉快递",
            "serviceTel": "",
            "logo": "//gw.alicdn.com/tps/TB1JfNLIFXXXXaNXFXXXXXXXXXX.png"
        },
        "XB": {
            "companyName": "新邦物流",
            "companyId": "1186",
            "serviceTel": "",
            "pinyin": "XBWL",
            "companyCode": "XB",
            "logo": "//gw.alicdn.com/tps/TB1QEXHIFXXXXcPXFXXXXXXXXXX.png"
        },
        "YANWENBJ": {
            "companyName": "燕文北京",
            "companyCode": "YANWENBJ",
            "companyId": "21000051004",
            "serviceTel": "",
            "pinyin": "YWBJ",
            "logo": defaultIcon
        },
        "YANWENSH": {
            "companyId": "21000052004",
            "companyName": "燕文上海",
            "companyCode": "YANWENSH",
            "serviceTel": "",
            "pinyin": "YWSH",
            "logo": defaultIcon
        },
        "XFWL": {
            "companyName": "信丰物流",
            "companyCode": "XFWL",
            "pinyin": "XFWL",
            "serviceTel": "",
            "companyId": "202855",
            "logo": defaultIcon
        },
        "YS": {
            "serviceTel": "",
            "companyName": "合众阳晟",
            "companyId": "204904",
            "companyCode": "YS",
            "logo": defaultIcon
        },
        "UNIPS": {
            "companyId": "1237",
            "pinyin": "FW",
            "companyName": "发网",
            "serviceTel": "",
            "companyCode": "UNIPS",
            "logo": defaultIcon
        },

        "SY": {
            "serviceTel": "",
            "companyName": "首业",
            "companyCode": "SY",
            "companyId": "1138",
            "pinyin": "SY",
            "logo": defaultIcon
        },
        "YC": {
            "companyName": "远长",
            "serviceTel": "",
            "companyId": "1139",
            "companyCode": "YC",
            "pinyin": "YC",
            "logo": defaultIcon
        },
        "YCT": {
            "pinyin": "HMZJB",
            "serviceTel": "",
            "companyId": "1185",
            "companyCode": "YCT",
            "companyName": "黑猫宅急便",
            "logo": "//gw.alicdn.com/tps/TB1B9pGIFXXXXcNXFXXXXXXXXXX.png"
        },
        "CYEXP": {
            "companyId": "511",
            "pinyin": "CY",
            "companyCode": "CYEXP",
            "companyName": "长宇",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "POSTB": {
            "companyName": "邮政国内小包",
            "serviceTel": "",
            "companyCode": "POSTB",
            "pinyin": "YZGNXB",
            "companyId": "200734",
            "logo": defaultIcon
        },
        "FAST": {
            "pinyin": "KJKD",
            "companyId": "1204",
            "companyName": "快捷快递",
            "companyCode": "FAST",
            "serviceTel": "4008333666",
            "logo": "//gw.alicdn.com/tps/TB1o6BWIFXXXXXbXpXXXXXXXXXX.png"
        },
        "HOAU": {
            "serviceTel": "",
            "companyName": "天地华宇",
            "companyCode": "HOAU",
            "pinyin": "TDHY",
            "companyId": "1191",
            "logo": "//gw.alicdn.com/tps/TB1Cz00IFXXXXbJXXXXXXXXXXXX.png"
        },
        "YANWENSZ": {
            "companyName": "燕文深圳",
            "pinyin": "YWSZ",
            "companyCode": "YANWENSZ",
            "companyId": "21000052006",
            "serviceTel": "",
            "logo": defaultIcon
        },

        "ESB": {
            "companyName": "E速宝",
            "pinyin": "ESB",
            "companyCode": "ESB",
            "serviceTel": "",
            "companyId": "200740",
            "logo": defaultIcon
        },
        "MGSD": {
            "companyName": "美国速递",
            "pinyin": "MGSD",
            "companyId": "21000007003",
            "companyCode": "MGSD",
            "serviceTel": "",
            "logo": defaultIcon
        },
        "UAPEX": {
            "companyId": "1259",
            "companyCode": "UAPEX",
            "pinyin": "QYKD",
            "serviceTel": "",
            "companyName": "全一快递",
            "logo": "//gw.alicdn.com/tps/TB1vqN1IFXXXXbKXXXXXXXXXXXX.png"
        }
    };

    win.InnerHot = ['HTKY', 'HTKY', 'HTKY', 'HTKY', 'HTKY', 'HTKY', 'HTKY', 'HTKY'];
    win.OuterHot = ['HTKY', 'HTKY', 'HTKY', 'HTKY', 'HTKY', 'HTKY', 'HTKY', 'HTKY'];

})(window);
/**
 * Created by lotuslwb1 on 15/10/19.
 */
function cpCompanyHandel() {
    this._init();
}

cpCompanyHandel.prototype = {
    _init: function () {
        this._bindEvent();
        this._getId();
    },
    _bindEvent: function () {
        var me = this;


    },
    _getId: function () {
        var me = this;
        var urlp = new window.mGG.urlParam();

        me.type = urlp.type;
        me.mailNo = urlp.mailNo;
        me.cpCode = urlp.cpCode;

        var cptype = me.type == 3 ? 'outerkd' : 'innerkd'
        var api = window.mGG.api.getAppLogisticsCompanyInfo;
        var params = {
            'cptype': cptype,
            'version': 0,
            'srcfrom': 'guoguowap'
        }
        window.mGG.load(api, params, function (data) {
            var Innerdata = data.data.hot;
            var allCompany = data.data.company;
            var alphaData = data.data.alpha;
            var returnData = [];

            for (var i = 0; i < Innerdata.length; i++) {
                var code = Innerdata[i];
                var data = {
                    'companyName': allCompany[code].companyName || '',
                    'logo': allCompany[code].iconUrl100x100 || '//gw.alicdn.com/tps/TB1OKFWIFXXXXXyXpXXXXXXXXXX.png',
                    'cpCode': allCompany[code].companyCode || '',
                    'serviceTel': allCompany[code].serviceTel || ''
                }
                returnData.push(data);
            }

            me.hotData = returnData;
            me.alphaData = alphaData;
            me.allCompany = allCompany;
            me._loadcpList(me);
        });


    },
    _loadcpList: function (me) {
        var mailNo = me.mailNo || '';
        var cpCode = me.cpCode || '';
        var type = me.type;

        //物流详情 选择快递公司
        if (type == 1) {
            if (!me.mailNo.length) {
                alert('缺少参数');
            } else {
                loadWithTpl('cplistTplNotel');
                $('.J-title-txt').text('选择快递公司');
            }
        }
        //国内快递 选择快递公司
        if (type == 2) {
            loadWithTpl('cplistTplNotel2');
            $('.J-title-txt').text('国内快递');
            window.onload = function () {
                goldlog.record('/cn.17.23.7','','','H46747619')
            };
        }

        //国外快递 选择快递公司
        if (type == 3) {
            loadWithTpl('cplistTplNotel2');
            $('.J-title-txt').text('国外快递');
            window.onload = function () {
                goldlog.record('/cn.17.23.8','','','H46747620')
            };
        }
        //国内快递电话
        if (type == 10) {
            loadWithTpl('cplistTpl');
            $('.J-title-txt').text('快递电话');
            window.onload = function () {
                goldlog.record('/cn.17.23.6','','','H46747618')
            };

        }

        function loadWithTpl(tpl) {

            var hotList = {
                'type': type,
                'cpCode': cpCode,
                'mailNo': mailNo,
                'data': me.hotData
            }
            var html = window.mGG.fillTpl(tpl, hotList);
            $('.J-rlist').html(html);

            var alphaData = [];
            var allCompany = me.allCompany;
            for (var key in me.alphaData) {
                for (var i = 0; i < me.alphaData[key].length; i++) {
                    var code = me.alphaData[key][i];
                    var data = {
                        'companyName': allCompany[code].companyName || '',
                        'logo': allCompany[code].iconUrl100x100 || '//gw.alicdn.com/tps/TB1OKFWIFXXXXXyXpXXXXXXXXXX.png',
                        'cpCode': allCompany[code].companyCode || '',
                        'serviceTel': allCompany[code].serviceTel || ''
                    }
                    alphaData.push(data);
                }
            }
            var allList = {
                'type': type,
                'cpCode': cpCode,
                'mailNo': mailNo,
                'data': alphaData
            }
            var html = window.mGG.fillTpl(tpl, allList);
            $('.J-alllist').html(html);

        }

    }
};




/**
 * Created by lotuslwb1 on 15/10/19.
 */
function indexHandel() {
    this._init();
}

indexHandel.prototype = {
    _init: function () {
        this._bindEvent();
        this._initSwipe();
        this._loadHotList();

    },
    _bindEvent: function () {
        var me = this;

        $('.J-historylist').hide();


        //初始化 判断btn
        if ($('.J-queryCode').val().length > 0) {
            $('.J-submit').removeClass('disable');
        } else {
            $('.J-submit').addClass('disable');

        }

        //关闭 首页滑动广告
        $('.J-Swiper-closed').on('click', function () {
            $('.swiper-box').css({'opacity': 0}).on('webkitTransitionEnd', function () {
                $(this).remove();
            })
        });

        //定位按钮
        $('.J-location-btn').on('click', function () {

            if (me.loading) {
                return false;
            }

            me.loading = true;
            $('.J-location-txt').html('定位中<span class="dotting"></span>');

            window.mGG.initGPS(function (data) {
                me.loading = false;

                $('.J-location-txt').html('定位成功');
                $('.J-location-info').html(data.address);
                me._loadStationList(data);
                me._loadPostManModelList(data);
            }, function () {
                me.loading = false;
                $('.J-location-txt').html('定位失败');
            });
        });


        //查询
        $('.J-submit').on('click', function () {

            var $qcode = $('.J-queryCode');

            if ($(this).hasClass('disable')) {
                return false;
            }


            var val = $qcode.val();
            var href = 'wuliuDetail.htm?mailNo=' + val;
            var data = {'mailNo': val};

            me._setHistory(data);
            window.location = href;


        });

        //输入框
        $('.J-queryCode').on('input', function () {
            if ($(this).val().length > 0) {
                $('.J-submit').removeClass('disable');
            } else {
                $('.J-submit').addClass('disable');
            }

            loadHistoryList();
        }).on('focus', function () {
            loadHistoryList()
        })


        function loadHistoryList() {
            var data = me._getHistory();
            var txt = $('.J-queryCode').val();

            //txt有值则过滤；没有值则显示全部
            //if (txt.length > 0) {
            //    data = filterDatabyTxt(data, txt);
            //}

            if (data.length > 0) {
                var html = window.mGG.fillTpl('historylistTpl', data);
                $('.J-historylist').html(html).show();
            } else {
                $('.J-historylist').html('').hide();
            }


            $('.history-list .closed').click(function () {
                $('.J-historylist').html('').hide();
            });

            $('.history-list .clear').click(function () {
                me._clearHistory();
                $('.J-historylist').html('').hide();
            });
            $('.history-list .items').click(function () {
                var txt = $(this).text();
                $('.J-queryCode').val(txt);
                $('.J-historylist').html('').hide();
                $('.J-submit').removeClass('disable');
            });


        }

        function filterDatabyTxt(data, txt) {
            var returnData = [];
            var txt = txt.toLocaleLowerCase();
            for (var i = 0; i < data.length; i++) {
                if (data[i].mailNo && data[i].mailNo.indexOf(txt) > -1) {
                    returnData.push(data[i])
                }
            }
            return returnData;
        }


    },
    _initSwipe: function () {
        var mySwiper = new Swiper('.swiper-container', {
            loop: false,
            // 如果需要分页器
            pagination: '.swiper-pagination'
        });

        if ($('.swiper-slide').length == 1) {
            $('.J-swiper-pagination').hide();
        }

        if ($('.swiper-slide').length == 0) {
            $('.J-swiper-box').hide();
        }

    },
    _loadHotList: function () {

        loadInnerHotsList();
        loadOuterHotsList();

        function loadInnerHotsList() {
            var api = window.mGG.api.getAppLogisticsCompanyInfo;
            var params = {
                'cptype': 'innerkd',
                'version': 0,
                'srcfrom': 'guoguowap'
            }
            window.mGG.load(api, params, function (data) {
                var Innerdata = data.data.hot;
                var allCompany = data.data.company;
                var returnData = [];

                console.log(allCompany)
                for (var i = 0; i < Innerdata.length; i++) {
                    var code = Innerdata[i];
                    var data = {
                        'companyName': allCompany[code].companyName || '',
                        'logo': allCompany[code].iconUrl100x100 || '//gw.alicdn.com/tps/TB1OKFWIFXXXXXyXpXXXXXXXXXX.png',
                        'cpCode': allCompany[code].companyCode || ''
                    }
                    returnData.push(data);
                }

                var html = window.mGG.fillTpl('innerListTpl', returnData);
                $('#J-innerList').html(html);
            });
        }

        function loadOuterHotsList() {
            var api = window.mGG.api.getAppLogisticsCompanyInfo;
            var params = {
                'cptype': 'outerkd',
                'version': 0,
                'srcfrom': 'guoguowap'
            }
            window.mGG.load(api, params, function (data) {
                var Innerdata = data.data.hot;
                var allCompany = data.data.company;
                var returnData = [];

                for (var i = 0; i < Innerdata.length; i++) {
                    var code = Innerdata[i];
                    var data = {
                        'companyName': allCompany[code].companyName || '',
                        'logo': allCompany[code].iconUrl100x100 || '//gw.alicdn.com/tps/TB1OKFWIFXXXXXyXpXXXXXXXXXX.png',
                        'cpCode': allCompany[code].companyCode || ''
                    }
                    returnData.push(data);
                }

                var html = window.mGG.fillTpl('outerListTpl', returnData);
                $('#J-outerList').html(html);
            });
        }

    },
    _loadStationList: function (data) {
        var api = window.mGG.api.queryStationList;
        var params = {
            stationType: 'send',
            areaId: data.adCode,
            addressId: data.adCode,
            address: data.address,
            longitude: data.longitude || '',
            latitude: data.latitude || ''
        }
        window.mGG.load(api, params, function (data) {
            var list = window.mGG.tmp.StationList(data);
            list.params = params;
            var html = window.mGG.fillTpl('siteSectionTpl', list);
            $('#J-siteSection').html(html);
        });
    },
    _loadPostManModelList: function (data) {
        var api = window.mGG.api.queryPostManModelList;
        var params = {
            address: data.address,
            longitude: data.longitude || '',
            latitude: data.latitude || ''
        }

        window.mGG.load(api, params, function (data) {
            var list = data.data.data.postManList;

            if (list.length == 0) {
                return false;
            }

            for (var i = 0; i < list.length; i++) {
                var code = list[i].cpCode || '';

                if (list[i].cpCompanyInfo) {
                    list[i].logo = list[i].cpCompanyInfo.iconUrl100x100 || '';
                }

            }

            list.params = params;

            var html = window.mGG.fillTpl('courierSectionTpl', list);
            $('#J-postManSection').html(html);

            $('.courier-list .logobox').click(function () {
                var href = $(this).parents('.items').data('href');
                window.location = href;
            });
            $('.courier-list .txt').click(function () {
                var href = $(this).parents('.items').data('href');
                window.location = href;
            });
        });
    },
    _setHistory: function (data) {
        var historyStr = Cookies.getCookie('wuliu');
        var historyArr = JSON.parse(historyStr) || [];

        var exists = -1;
        $.each(historyArr, function (i, item) {
            if (data.mailNo && (item.mailNo == data.mailNo)) {
                exists = i;
                return false;
            }
        });

        if (exists > -1) {
            historyArr.splice(exists, 1);
        }

        // 将纪录添加到开头
        historyArr.unshift(data);
        if (historyArr.length > 10) {
            historyArr.pop();
        }

        Cookies.setCookie('wuliu', JSON.stringify(historyArr), 365, '/');

    },
    _getHistory: function () {
        var historyStr = Cookies.getCookie('wuliu');
        var historyArr = JSON.parse(historyStr) || [];

        return historyArr;
    },
    _clearHistory: function () {
        Cookies.setCookie('wuliu', JSON.stringify(''), 365, '/');
    }
};




/**
 * Created by lotuslwb1 on 15/10/19.
 */
function indexCompanyHandel() {
    this._init();
}

indexCompanyHandel.prototype = {
    _init: function () {
        this._getId();
    },
    _bindEvent: function () {
        var me = this;

        //初始化 判断btn
        if ($('.J-queryCode').val().length > 0) {
            $('.J-submit').removeClass('disable');
        } else {
            $('.J-submit').addClass('disable');

        }


        //查询
        $('.J-submit').on('click', function () {

            var $qcode = $('.J-queryCode');

            if ($(this).hasClass('disable')) {
                return false;
            }


            var val = $qcode.val();
            var href = 'wuliuDetail.htm?mailNo=' + val + '&cpCode=' + me.cpCode;
            var data = {'mailNo': val};

            me._setHistory(data);
            window.location = href;


        });

        //输入框
        $('.J-queryCode').on('input', function () {
            if ($(this).val().length > 0) {
                $('.J-submit').removeClass('disable');
            } else {
                $('.J-submit').addClass('disable');
            }

            loadHistoryList();
        }).on('focus', function () {
            loadHistoryList()
        })


        function loadHistoryList() {
            var data = me._getHistory();
            var txt = $('.J-queryCode').val();

            //txt有值则过滤；没有值则显示全部
            if (txt.length > 0) {
                data = filterDatabyTxt(data, txt);
            }

            if (data.length > 0) {
                var html = window.mGG.fillTpl('historylistTpl', data);
                $('.J-historylist').html(html);
            } else {
                $('.J-historylist').html('');
            }


            $('.history-list .closed').click(function () {
                $('.J-historylist').html('');
            });

            $('.history-list .clear').click(function () {
                me._clearHistory();
                $('.J-historylist').html('');
            });
            $('.history-list .items').click(function () {
                var txt = $(this).text();
                $('.J-queryCode').val(txt);
                $('.J-historylist').html('');
                $('.J-submit').removeClass('disable');
            });


        }

        function filterDatabyTxt(data, txt) {
            var returnData = [];
            var txt = txt.toLocaleLowerCase();
            for (var i = 0; i < data.length; i++) {
                if (data[i].mailNo && data[i].mailNo.indexOf(txt) > -1) {
                    returnData.push(data[i])
                }
            }
            return returnData;
        }

    },
    _getId: function () {
        var me = this;
        var urlp = new window.mGG.urlParam();

        me.cpCode = urlp.cpCode;
        me.type = urlp.type;
        if (!me.cpCode) {
            alert('缺少参数');
        } else {
            me._loadcpList(me);
        }
    },
    _loadcpList: function (me) {

        var data;
        //国内
        if (me.type == 2) {
            var cpCode = me.cpCode;
            data = me._loadCP('innerkd', cpCode, me);
        }

        //国外
        if (me.type == 3) {
            var cpCode = me.cpCode;
            data = me._loadCP('outerkd', cpCode, me);
        }


    },
    _loadCP: function (cptype, cpCode, me) {
        var api = window.mGG.api.getAppLogisticsCompanyInfo;
        var params = {
            'cptype': cptype,
            'version': 0,
            'srcfrom': 'guoguowap'
        }
        window.mGG.load(api, params, function (data) {
            var allCompany = data.data.company;
            if (allCompany[cpCode]) {
                allCompany[cpCode].logo = allCompany[cpCode].iconUrl288x72 || '//gw.alicdn.com/tps/TB1OKFWIFXXXXXyXpXXXXXXXXXX.png';
                var html = window.mGG.fillTpl('indexCompanyTpl', allCompany[cpCode]);
                $('.J-IndexCompany').html(html);

                me._bindEvent();
            }

        });
    },
    _setHistory: function (data) {
        var historyStr = Cookies.getCookie('wuliu');
        var historyArr = JSON.parse(historyStr) || [];

        var exists = false;
        $.each(historyArr, function (i, item) {
            if (data.mailNo && (item.mailNo == data.mailNo)) {
                exists = true;
                return false;
            }
        });

        if (!exists) {
            // 将新纪录添加到开头
            historyArr.unshift(data);
            if (historyArr.length > 10) {
                historyArr.pop();
            }
        }

        Cookies.setCookie('wuliu', JSON.stringify(historyArr), 365, '/');

    },
    _getHistory: function () {
        var historyStr = Cookies.getCookie('wuliu');
        var historyArr = JSON.parse(historyStr) || [];

        return historyArr;
    },
    _clearHistory: function () {
        Cookies.setCookie('wuliu', JSON.stringify(''), 365, '/');
    }
}
;




/**
 * Created by lotuslwb1 on 15/10/19.
 */
function postmanHandel() {
    this._init();
}

postmanHandel.prototype = {
    _init: function () {
        this._bindEvent();
        this._getGps();
    },
    _bindEvent: function () {
        var me = this;

        //定位按钮
        $('.J-location-btn').on('click', function () {
            if (me.loading) {
                return false;
            }
            me._gpsStatus(me);

        });

    },
    _getGps: function () {
        var me = this;
        var urlp = new window.mGG.urlParam();

        me.longitude = urlp.longitude;
        me.latitude = urlp.latitude;
        if (!me.longitude || !me.latitude) {
            me._gpsStatus(me);
        } else {
            var lnglatXY = [me.longitude, me.latitude];//地图上所标点的坐标

            //获取adCode并完成回调
            window.mGG.getCityCode(lnglatXY, function (result) {
                me.adCode = result.regeocode.addressComponent.adcode;
                me.address = result.regeocode.formattedAddress;
                $('.J-location-txt').html('重新定位');
                me._loadPostManModelList(me);
            });
        }
    },
    _gpsStatus: function (me) {
        me.loading = true;
        $('.J-location-txt').html('定位中<span class="dotting"></span>');
        window.mGG.initGPS(function (data) {
            me.loading = false;
            $('.J-location-txt').html('重新定位');
            me._loadPostManModelList(data);
        }, function () {
            me.loading = false;
            $('.J-location-txt').html('定位失败');
        });

    },
    _loadPostManModelList: function (data) {
        var api = window.mGG.api.queryPostManModelList;
        var params = {
            address: data.address,
            longitude: data.longitude || '',
            latitude: data.latitude || ''
        }

        window.mGG.load(api, params, function (data) {

            console.log(data);

            var list = data.data.data.postManList;

            for (var i = 0; i < list.length; i++) {
                list[i].logo = list[i].cpCompanyInfo.iconUrl100x100 || '';
            }

            list.params = params;

            var html = window.mGG.fillTpl('courierSectionTpl', list);
            $('#J-postManSection').html(html);
            $('.J-location-info').text(params.address);

            $('.courier-list .logobox').click(function () {
                var href = $(this).parents('.items').data('href');
                window.location = href;
            });
            $('.courier-list .txt').click(function () {
                var href = $(this).parents('.items').data('href');
                window.location = href;
            });
        });
    }
};




/**
 * Created by lotuslwb1 on 15/10/19.
 */
function postmanDetailHandel() {
    this._init();
}

postmanDetailHandel.prototype = {
    _init: function () {
        this._bindEvent();
        this._getId();
    },
    _bindEvent: function () {
        var me = this;


    },
    _getId: function () {
        var me = this;
        var urlp = new window.mGG.urlParam();

        me.longitude = urlp.longitude;
        me.latitude = urlp.latitude;
        me.id = urlp.id;
        if (!me.longitude || !me.latitude || !me.id) {
            alert('缺少参数');
        } else {
            var lnglatXY = [me.longitude, me.latitude];//地图上所标点的坐标
            me._loadPostManList(me);
            //获取adCode并完成回调
            window.mGG.getCityCode(lnglatXY, function (result) {
                me.adCode = result.regeocode.addressComponent.adcode;
                me.address = result.regeocode.formattedAddress;
                $('.J-location-txt').html('重新定位');

            });
        }
    },
    _loadPostManList: function (data) {
        var api = window.mGG.api.queryPostManModelList;
        var id = data.id;
        var params = {
            address: data.address,
            longitude: data.longitude || '',
            latitude: data.latitude || ''
        }

        window.mGG.load(api, params, function (data) {
            var list = data.data.data.postManList;
            var item = getDatabytel(list, id);
            var code = item.cpCode || '';
            item.logo = item.cpCompanyInfo.iconUrl100x100 || '';
            var html = window.mGG.fillTpl('courierDetailSectionTpl', item);
            $('#J-courierDetailSection').html(html);
        });

        function getDatabytel(data, tel) {
            var item;
            for (var i = 0; i < data.length; i++) {
                if (data[i].telePhone == tel) {
                    item = data[i];
                }
            }

            return item;
        }
    }
};




/**
 * Created by lotuslwb1 on 15/10/19.
 */
function siteHandel() {
    this._init();
}

siteHandel.prototype = {
    _init: function () {
        this._bindEvent();
        this._getGps();
    },
    _bindEvent: function () {
        var me = this;

        //定位按钮
        $('.J-location-btn').on('click', function () {
            if (me.loading) {
                return false;
            }
            me._gpsStatus(me);

        });

    },
    _getGps: function () {
        var me = this;
        var urlp = new window.mGG.urlParam();

        me.longitude = urlp.longitude;
        me.latitude = urlp.latitude;
        if (!me.longitude || !me.latitude) {
            me._gpsStatus(me);
        } else {
            var lnglatXY = [me.longitude, me.latitude];//地图上所标点的坐标

            //获取adCode并完成回调
            window.mGG.getCityCode(lnglatXY, function (result) {
                me.adCode = result.regeocode.addressComponent.adcode;
                me.address = result.regeocode.formattedAddress;
                $('.J-location-txt').html('重新定位');
                me._loadStationList(me);
            });
        }
    },
    _gpsStatus: function (me) {
        me.loading = true;
        $('.J-location-txt').html('定位中<span class="dotting"></span>');
        window.mGG.initGPS(function (data) {
            me.loading = false;
            $('.J-location-txt').html('重新定位');
            me._loadStationList(data);
        }, function () {
            me.loading = false;
            $('.J-location-txt').html('定位失败');
        });

    },
    _loadStationList: function (data) {
        var api = window.mGG.api.queryStationList;
        var params = {
            stationType: 'send',
            areaId: data.adCode,
            addressId: data.adCode,
            address: data.address,
            longitude: data.longitude || '',
            latitude: data.latitude || ''
        }
        window.mGG.load(api, params, function (data) {
            var list = window.mGG.tmp.StationList(data);
            var html = window.mGG.fillTpl('siteSectionTpl', list);
            console.log(list);
            $('#J-siteSection').html(html);
            $('.J-location-info').text(params.address);
        });
    }
};




/**
 * Created by lotuslwb1 on 15/10/19.
 */
function siteDetailHandler() {
    this._init();
}

siteDetailHandler.prototype = {
    _init: function () {
        var me = this;
        me._bindEvent();
        me._getId(function (data) {
            me._loadMap(data);
        });
    },
    _bindEvent: function () {

    },
    _loadMap: function (data) {
        // 获取地图参数lat
        var loc = [parseFloat(data.lng) / 100000, parseFloat(data.lat) / 100000];
        var destName = data.stationName;
        var address = data.deliveryAddress.replace(/\^/g, '');
        var openingHours = data.officeTime;
        var href = '//m.amap.com/navi/?dest=' + loc + '&destName=' + encodeURIComponent(destName) + '&hideRouteIcon=1&key=fadaf28e16205d6a46fc5e6bafed7f31';
        var phone;

        console.log(address)

        if (data.phone) {
            phone = data.phone
        } else {
            phone = data.mobile || '';
        }


        var data = {
            src: href,
            destName: destName,
            address: address,
            phone: phone,
            openingHours: openingHours
        };
        var html = window.mGG.fillTpl('mapPage', data);
        $('body').html(html);


        var bodyH =$(document).height();
        var h = bodyH - 90-160;
        $('.J-map-view').height(h);


    },
    _getId: function (callback) {
        var me = this;
        var urlp = window.mGG.urlParam();
        me.id = urlp.stationId;
        if (me.id) {
            var api = window.mGG.api.queryStationById;
            var params = {stationId: me.id};
            window.mGG.load(api, params, function (data) {
                data = data.data;
                if (callback) {
                    callback(data);
                }
            });
        } else {

        }
    }
};




/**
 * Created by lotuslwb1 on 15/10/19.
 */
function timeQueryHandel() {
    this._init();
}

timeQueryHandel.prototype = {
    _init: function () {
        this.count = -1;
        this._bindEvent();
        this._initSelect();
        //this._getGps();
    },
    _initSelect: function () {
        var me = this;
        AMap.service('AMap.DistrictSearch', function () {//回调函数

            //实例化DistrictSearch
            me.districtSearch = new AMap.DistrictSearch({
                level: 'country',
                subdistrict: 1
            });

            me._searchSelect(me, '中国', 'country');


        })
    },
    _genSelect: function (me, data) {

        console.log(data);

        if (!me.districtSearch) {
            return false;
        }
        var str = '';
        for (var i = 0; i < data.length; i++) {
            str += '<div class="items J-items" data-code="' + data[i].adcode + '" data-level="' + data[i].level + '">' + data[i].name + '</div>';
        }
        $('.J-selectList').html(str);

        $('.J-items').click(function () {
            var code = $(this).data('code');
            var level = $(this).data('level');
            var name = $(this).text();
            if (level != 'province') {
                var text = $('.J-tabs').text();
                $('.J-tabs').text(text + '>' + name);
            } else {
                $('.J-tabs').text(name);
            }
            if (me.count < 3 && name != '台湾省') {
                me._searchSelect(me, name, level);
            } else {
                var Allname = $('.J-tabs').text();
                Allname = Allname.replace(/\>/g, '-');
                me._closeSelect(me, Allname, code);
            }
        });
    },
    _searchSelect: function (me, name, level) {

        me.count++;

        if (!me.districtSearch) {
            return false;
        }

        me.districtSearch.setLevel(level);

        //调用查询方法
        me.districtSearch.search(name, function (status, result) {

            if (result.info == 'OK') {
                var data = result.districtList[0].districtList || result.districtList;

                me._genSelect(me, data);
            } else {
                console.log(result);
            }
        })

    },
    _closeSelect: function (me, Allname, code) {
        me.count = 0;

        if (Allname && code) {
            var role = me.role;
            me[role] = code;
            $('.J-' + role).text(Allname);
        }
        $('.J-tabs').text('');
        $('#floatPageSelect').removeClass('show');

        if (me.send && me.get) {
            $('.J-timeQueryMain-btn').removeClass('disable');
        }

    },
    _openSelect: function (me) {
        if (me.districtSearch) {
            me._searchSelect(me, '中国', 'country');
            $('#floatPageSelect').addClass('show');
        }
    },
    _bindEvent: function () {
        var me = this;


        //选择城市
        $('.J-inputInner').on('click', function () {
            me.role = $(this).data('rol');
            me._openSelect(me);
            $('#floatPageSelect').addClass('show');
        });

        //提交
        $('.J-timeQueryMain-btn').on('click', function () {

            if ($(this).hasClass('disable')) {
                return false;
            }

            var bodyH = $(document).height();
            var h = bodyH - 90 - 570;
            $('.J-rList').height(h);


            var sendAreaId = $(this).parents('.container').find('.send').data('v');
            var sendAreaText = $(this).parents('.container').find('.send').text();
            var receiveAreadId = $(this).parents('.container').find('.get').data('v');
            var receiveAreadText = $(this).parents('.container').find('.get').text();
            var api = window.mGG.api.CPAgingList;
            var params = {"sendAreaId": me.send, "receiveAreadId": me.get};

            window.mGG.load(api, params, timeQuery_S);


            function timeQuery_S(data) {
                var data = data.data.data;


                if (data && data.length) {
                    data.sendAreaId = sendAreaId, data.sendAreaText = sendAreaText;
                    data.receiveAreadId = receiveAreadId, data.receiveAreadText = receiveAreadText;
                    data = addLogo(data);

                    var html = window.mGG.fillTpl('timeQueryResultTpl', data);
                    $('.J-rList').html(html).show();
                    $('.J-logo').hide();
                    $('.J-footer').hide();
                } else {
                    $('.J-noresult').show();
                    $('.J-rList').hide();
                    $('.J-logo').show();
                    $('.J-footer').show();
                }


                $('.J-timeQueryMain-btn').addClass('disable');
            }
        });

        //关闭浮层
        $('.J-closed').on('click', function () {
            me.count = 0;
            $('.J-tabs').text('');
            $('#floatPageSelect').removeClass('show');
        });

        //旋转
        $('.J-input-swicth-icon').on('click', function () {
            var middle = me.send || '';
            var middleTxt = $('.J-send').text();

            me.send = me.get || '';
            me.get = middle;

            $('.J-send').text($('.J-get').text());
            $('.J-get').text(middleTxt);

            $('.J-timeQueryMain-btn').removeClass('disable');

        });


        function addLogo(data) {
            for (var i = 0; i < data.length; i++) {
                if (data[i].cpCompanyInfo) {
                    data[i].logo = data[i].cpCompanyInfo.iconUrl100x100 || '';
                }

            }
            return data;
        }
    },
    _getGps: function () {
        var me = this;
        var urlp = new window.mGG.urlParam();

        me.longitude = urlp.longitude;
        me.latitude = urlp.latitude;
        if (!me.longitude || !me.latitude) {
            me._gpsStatus(me);
        } else {
            var lnglatXY = [me.longitude, me.latitude];//地图上所标点的坐标

            //获取adCode并完成回调
            window.mGG.getCityCode(lnglatXY, function (result) {
                me.adCode = result.regeocode.addressComponent.adcode;
                me.address = result.regeocode.formattedAddress;
                $('.J-location-txt').html('重新定位');
                me._loadPostManModelList(me);
            });
        }
    },
    _gpsStatus: function (me) {
        me.loading = true;
        $('.J-location-txt').html('定位中<span class="dotting"></span>');
        window.mGG.initGPS(function (data) {
            me.loading = false;
            $('.J-location-txt').html('重新定位');
            me._loadPostManModelList(data);
        }, function () {
            me.loading = false;
            $('.J-location-txt').html('定位失败');
        });

    },
    _loadtimeQueryList: function (data) {
        var api = window.mGG.api.queryPostManModelList;
        var params = {
            address: data.address,
            longitude: data.longitude || '',
            latitude: data.latitude || ''
        }

        window.mGG.load(api, params, function (data) {
            var list = data.data.data.postManList;

            $('.J-noresult').hide();

            for (var i = 0; i < list.length; i++) {
                var code = list[i].cpCode || '';
                list[i].logo = window.mGG.getLogobyCode(code);
            }

            list.params = params;

            var html = window.mGG.fillTpl('courierSectionTpl', list);
            $('#J-postManSection').html(html);
            $('.J-location-info').text(params.address);

            $('.courier-list .items').click(function () {
                var href = $(this).data('href');
                window.location = href;
            });
        });
    }
};




/**
 * Created by lotuslwb1 on 15/10/19.
 */
function wuliuDetailHandel() {
    this._init();
}

wuliuDetailHandel.prototype = {
    _init: function () {


        this._bindEvent();
        this._getId();
    },
    _bindEvent: function () {
        var me = this;


    },
    _getId: function () {
        var me = this;
        var urlp = new window.mGG.urlParam();

        me.mailNo = urlp.mailNo;
        me.cpCode = urlp.cpCode;
        if (!me.mailNo) {
            alert('缺少参数');
        } else {
            me._loadWuliuDetail(me);
        }
    },
    _loadWuliuDetail: function (data) {
        var mailNo = data.mailNo;
        var cpCode = data.cpCode || '';
        var api = window.mGG.api.queryLogisticPackageByMailNo;
        var params = {'mailNo': mailNo, 'cpCode': cpCode};

        window.mGG.load(api, params, tmpWuliuDetail, function (data) {
            $('.J-nofound').show();
        });

        function tmpWuliuDetail(data) {
            var data = data.data;


            if (!data.transitList) {
                data.transitList = '';
            }

            data.mailNo = decodeURIComponent(data.mailNo);

            var html = window.mGG.fillTpl('wuliuDetailTpl', data);
            $('.J-wuliudetailPage').html(html);


            var bodyH = $('body').height();
            var h = bodyH - 90 - 150 - 160 - 20;
            $('.J-wuliu-view').height(h);


        }
    }
};



