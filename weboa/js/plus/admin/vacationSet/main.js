define(function(require,n,t){var o=require("$");require("bootstrap"),require("jquery/plugins/bootstrap-datepicker");var e=require("./calendar"),a={now:new Date,monthMap:["01","02","03","04","05","06","07","08","09","10","11","12"],init:function(){var n=this;n.monthChs(),o(".j-backToday").on("click",function(t){t.preventDefault(),n.nowMonth===n.monthMap[n.now.getMonth()]&&n.nowYear===n.now.getFullYear()||(n.nowMonth=n.monthMap[n.now.getMonth()],n.nowYear=n.now.getFullYear(),o("#j-monthChs").trigger("changeDate"))})},monthChs:function(){var n=this;n.nowMonth=n.monthMap[this.now.getMonth()],n.nowYear=n.now.getFullYear(),o("#j-monthChs").val(n.nowYear+"年"+n.nowMonth+"月").datepicker({format:"yyyy年mm月",startView:1,minViewMode:1,language:"zh-CN"}),o("#j-monthChs").on("changeDate",function(){o(this).val(n.nowYear+"年"+n.nowMonth+"月"),e.init(n.nowYear,n.nowMonth)}),o("#j-monthChs").on("changeMonth",function(t){n.nowYear=new Date(t.date).getFullYear(),n.nowMonth=n.monthMap[new Date(t.date).getMonth()]}).trigger("changeDate"),o("#j-monthPrev").on("click",function(){var t=n.nowMonth-2;0>t&&(t=11,n.nowYear-=1),n.nowMonth=n.monthMap[t],o("#j-monthChs").trigger("changeDate")}),o("#j-monthNext").on("click",function(){var t=parseInt(n.nowMonth);t>11&&(t=0,n.nowYear+=1),n.nowMonth=n.monthMap[t],o("#j-monthChs").trigger("changeDate")})}};t.exports=a.init()});